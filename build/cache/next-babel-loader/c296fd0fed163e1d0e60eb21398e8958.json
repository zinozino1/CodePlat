{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport ArticleLayout from \"../../../components/layout/ArticleLayout\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { loadPostsReqeustAction, initializePostsAction // searchPostsRequestAction,\n} from \"../../../reducers/post\";\nimport List from \"../../../components/common/contents/List\";\nimport { Spin, Select } from \"antd\";\nimport styled from \"styled-components\";\nimport { withRouter } from \"next/router\";\nimport Head from \"next/head\";\nimport { Locations } from \"../../../lib/constant/constant\";\nvar SelectLocationWrapper = styled.div.withConfig({\n  displayName: \"project__SelectLocationWrapper\",\n  componentId: \"beul8m-0\"\n})([\"text-align:right;margin-bottom:10px;\"]);\nvar Label = styled.span.withConfig({\n  displayName: \"project__Label\",\n  componentId: \"beul8m-1\"\n})([\"font-weight:500;\"]);\nvar SpinWrapper = styled.div.withConfig({\n  displayName: \"project__SpinWrapper\",\n  componentId: \"beul8m-2\"\n})([\"text-align:center;margin:100px 0;\"]);\nvar skip = 0;\nvar LocationSelectChildren = [];\nLocations.forEach(function (v, i) {\n  LocationSelectChildren.push( /*#__PURE__*/_jsx(Select.Option, {\n    children: v.value\n  }, v.key));\n});\n\nvar Project = function Project(_ref) {\n  var router = _ref.router;\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.skill;\n  }),\n      skill = _useSelector.skill;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.post;\n  }),\n      projectPosts = _useSelector2.projectPosts,\n      loadPostsLoading = _useSelector2.loadPostsLoading;\n\n  var _useSelector3 = useSelector(function (state) {\n    return state.post;\n  }),\n      temporalPostsLength = _useSelector3.temporalPostsLength;\n\n  var _useState = useState(\"전체\"),\n      location = _useState[0],\n      setLocation = _useState[1];\n\n  var onChangeLocation = useCallback(function (value) {\n    setLocation(value);\n  }, []);\n\n  var handleScroll = function handleScroll() {\n    var scrollHeight = document.documentElement.scrollHeight;\n    var scrollTop = document.documentElement.scrollTop;\n    var clientHeight = document.documentElement.clientHeight;\n\n    if (scrollTop + clientHeight >= scrollHeight && !loadPostsLoading) {\n      if (temporalPostsLength >= 10) {\n        dispatch(loadPostsReqeustAction({\n          type: \"project\",\n          skip: skip,\n          techStack: skill,\n          term: router.query.term,\n          location: location\n        }));\n        skip += 10;\n      }\n    }\n  };\n\n  useEffect(function () {\n    //console.log(encodeURIComponent(skill.toString()));\n    dispatch(loadPostsReqeustAction({\n      type: \"project\",\n      term: router.query.term,\n      skip: skip,\n      techStack: skill,\n      location: location\n    }));\n    skip += 10;\n    return function () {\n      skip = 0;\n      dispatch(initializePostsAction());\n    };\n  }, [router, skill, location]);\n  useEffect(function () {\n    window.addEventListener(\"scroll\", handleScroll);\n    return function () {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [temporalPostsLength]);\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"meta\", {\n        charSet: \"utf-8\"\n      }), /*#__PURE__*/_jsx(\"title\", {\n        children: \"\\uD504\\uB85C\\uC81D\\uD2B8\"\n      })]\n    }), /*#__PURE__*/_jsxs(ArticleLayout, {\n      contentType: \"project\",\n      children: [/*#__PURE__*/_jsxs(SelectLocationWrapper, {\n        children: [/*#__PURE__*/_jsx(Label, {\n          style: {\n            lineHeight: \"32px\"\n          },\n          children: \"\\uC9C0\\uC5ED\"\n        }), /*#__PURE__*/_jsx(Select, {\n          defaultValue: \"\\uC804\\uCCB4\",\n          bordered: false,\n          style: {\n            color: \"#999\"\n          },\n          onChange: onChangeLocation,\n          children: LocationSelectChildren\n        })]\n      }), /*#__PURE__*/_jsx(List, {\n        data: projectPosts,\n        type: \"project\"\n      }), loadPostsLoading && /*#__PURE__*/_jsx(SpinWrapper, {\n        children: /*#__PURE__*/_jsx(Spin, {\n          tip: \"\\uBD88\\uB7EC\\uC624\\uB294\\uC911...\"\n        })\n      })]\n    })]\n  });\n};\n\nexport var __N_SSP = true;\nexport default withRouter(Project);","map":null,"metadata":{},"sourceType":"module"}