{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useEffect, useCallback, useState } from \"react\";\nimport ArticleLayout from \"../../../components/layout/ArticleLayout\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { loadPostsReqeustAction, initializePostsAction, loadForumPostsRequestAction } from \"../../../reducers/post\";\nimport List from \"../../../components/common/contents/List\";\nimport { Spin, Radio, Select } from \"antd\";\nimport styled from \"styled-components\";\nimport Router, { withRouter } from \"next/router\";\nimport Head from \"next/head\";\nvar SpinWrapper = styled.div.withConfig({\n  displayName: \"forum__SpinWrapper\",\n  componentId: \"sc-11m321c-0\"\n})([\"text-align:center;margin:100px 0;\"]);\nvar ForumFilterWrapper = styled.div.withConfig({\n  displayName: \"forum__ForumFilterWrapper\",\n  componentId: \"sc-11m321c-1\"\n})([\"margin-bottom:10px;.ant-radio-button-wrapper-checked{color:#888;text-decoration:underline;&:hover{color:#888;}}.ant-radio-button-wrapper{transition:none;&::before{display:none;}&:hover{text-decoration:underline;}background:transparent;color:#888;border:none;font-size:12px;.ant-radio-button{}.ant-radio-button-checked{display:none;}}\"]);\nvar skip = 0;\n\nvar Forum = function Forum(_ref) {\n  var router = _ref.router;\n\n  var _useState = useState(\"latest\"),\n      radioValue = _useState[0],\n      setRadioValue = _useState[1];\n\n  var _useState2 = useState(\"전체\"),\n      field = _useState2[0],\n      setField = _useState2[1];\n\n  var term = router.query.term;\n  var onChangeField = useCallback(function (e) {\n    setField(e);\n\n    if (term) {\n      Router.push(\"/articles/forum?term=\".concat(term));\n    } else {\n      Router.push(\"/articles/forum\");\n    }\n  }, [router]);\n  var onClickRadio = useCallback(function (e) {\n    setRadioValue(e.target.value);\n  }, []);\n  var onClickSort = useCallback(function (e) {\n    if (term) {\n      Router.push(\"/articles/forum?term=\".concat(term));\n    } else {\n      Router.push(\"/articles/forum\");\n    }\n  }, [router]);\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.post;\n  }),\n      forumPosts = _useSelector.forumPosts,\n      loadPostsLoading = _useSelector.loadPostsLoading;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.post;\n  }),\n      temporalPostsLength = _useSelector2.temporalPostsLength;\n\n  var handleScroll = function handleScroll() {\n    var scrollHeight = document.documentElement.scrollHeight;\n    var scrollTop = document.documentElement.scrollTop;\n    var clientHeight = document.documentElement.clientHeight;\n\n    if (scrollTop + clientHeight >= scrollHeight && !loadPostsLoading) {\n      if (temporalPostsLength >= 10) {\n        dispatch(loadForumPostsRequestAction({\n          type: radioValue,\n          skip: skip,\n          term: router.query.term,\n          field: field\n        }));\n      }\n\n      skip += 10;\n    }\n  };\n\n  useEffect(function () {\n    dispatch(loadForumPostsRequestAction({\n      type: radioValue,\n      term: router.query.term,\n      skip: skip,\n      field: field\n    }));\n    skip += 10;\n    return function () {\n      skip = 0;\n      dispatch(initializePostsAction());\n    };\n  }, [router]);\n  useEffect(function () {\n    window.addEventListener(\"scroll\", handleScroll);\n    return function () {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [temporalPostsLength]);\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"meta\", {\n        charSet: \"utf-8\"\n      }), /*#__PURE__*/_jsx(\"title\", {\n        children: \"\\uD3EC\\uB7FC\"\n      })]\n    }), /*#__PURE__*/_jsxs(ArticleLayout, {\n      contentType: \"forum\",\n      children: [/*#__PURE__*/_jsxs(ForumFilterWrapper, {\n        children: [/*#__PURE__*/_jsxs(Select, {\n          defaultValue: \"\\uC804\\uCCB4\",\n          onChange: onChangeField,\n          children: [/*#__PURE__*/_jsx(Select.Option, {\n            value: \"\\uC804\\uCCB4\",\n            children: \"\\uC804\\uCCB4\"\n          }), /*#__PURE__*/_jsx(Select.Option, {\n            value: \"\\uC790\\uC720\",\n            children: \"\\uC790\\uC720\"\n          }), /*#__PURE__*/_jsx(Select.Option, {\n            value: \"QnA\",\n            children: \"QnA\"\n          })]\n        }), /*#__PURE__*/_jsxs(Radio.Group, {\n          onChange: onClickRadio,\n          defaultValue: \"latest\",\n          children: [/*#__PURE__*/_jsx(Radio.Button, {\n            value: \"latest\",\n            onClick: onClickSort,\n            children: \"\\uCD5C\\uC2E0\\uC21C\"\n          }), /*#__PURE__*/_jsx(Radio.Button, {\n            value: \"likes\",\n            onClick: onClickSort,\n            children: \"\\uCD94\\uCC9C\\uC21C\"\n          }), /*#__PURE__*/_jsx(Radio.Button, {\n            value: \"comments\",\n            onClick: onClickSort,\n            children: \"\\uB313\\uAE00\\uC21C\"\n          }), /*#__PURE__*/_jsx(Radio.Button, {\n            value: \"scraps\",\n            onClick: onClickSort,\n            children: \"\\uC2A4\\uD06C\\uB7A9\\uC21C\"\n          }), /*#__PURE__*/_jsx(Radio.Button, {\n            value: \"views\",\n            onClick: onClickSort,\n            children: \"\\uC870\\uD68C\\uC21C\"\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(List, {\n        data: forumPosts,\n        type: \"forum\"\n      }), loadPostsLoading && /*#__PURE__*/_jsx(SpinWrapper, {\n        children: /*#__PURE__*/_jsx(Spin, {\n          tip: \"\\uBD88\\uB7EC\\uC624\\uB294\\uC911...\"\n        })\n      })]\n    })]\n  });\n};\n\nexport var __N_SSP = true;\nexport default withRouter(Forum);","map":null,"metadata":{},"sourceType":"module"}