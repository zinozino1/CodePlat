{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from \"react\";\nimport { Layout, Row, Col, Divider, Skeleton, Carousel, Button } from \"antd\";\nimport Header from \"../components/common/Header\";\nimport Footer from \"../components/common/Footer\";\nimport styled from \"styled-components\";\nimport MyProfile from \"../components/home/MyProfile\";\nimport ContentTemplate from \"../components/home/ContentTemplate\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport List from \"../components/common/contents/List\";\nimport { mainLoadPostsReqeustAction, initializePostsAction } from \"../reducers/post\";\nimport { END } from \"redux-saga\";\nimport wrapper from \"../store/configureStore\";\nimport { setUserRequestAction, SET_USER_REQUEST } from \"../reducers/user\";\nimport axios from \"axios\";\nimport firebase from \"../firebase\";\nimport client from \"../lib/api/client\";\nimport { SERVER_URL } from \"../lib/constant/constant\";\nimport logo from \"../statics/logo.png\";\nconst Content = Layout.Content;\nconst ContentWrapper = styled(Content).withConfig({\n  displayName: \"pages__ContentWrapper\",\n  componentId: \"sc-1i8o6yy-0\"\n})([\"width:1300px;margin:100px auto;@media (max-width:1368px){&{width:100%;}}@media (max-width:950px){&{margin:125px auto;}}\"]);\nconst ListWrapper = styled.div.withConfig({\n  displayName: \"pages__ListWrapper\",\n  componentId: \"sc-1i8o6yy-1\"\n})([\"padding:20px;\"]);\nconst MainLoadingSkeleton = styled(Skeleton).withConfig({\n  displayName: \"pages__MainLoadingSkeleton\",\n  componentId: \"sc-1i8o6yy-2\"\n})([\"margin-bottom:10px;\"]);\nconst MainInfoWrapper = styled.div.withConfig({\n  displayName: \"pages__MainInfoWrapper\",\n  componentId: \"sc-1i8o6yy-3\"\n})([\"padding:20px;width:100%;height:62vh;margin-bottom:20px;position:relative;@media (max-width:1368px){.main-info-content{position:relative;width:100%;height:100%;}.main-info-back{display:none;}}\"]);\nconst MainInfoContent = styled.div.withConfig({\n  displayName: \"pages__MainInfoContent\",\n  componentId: \"sc-1i8o6yy-4\"\n})([\"padding:20px;position:absolute;top:50px;width:340px;height:400px;background:#fff;z-index:2;.logo-image{width:100%;}\"]);\nconst MainInfoBackground = styled.div.withConfig({\n  displayName: \"pages__MainInfoBackground\",\n  componentId: \"sc-1i8o6yy-5\"\n})([\"position:absolute;top:90px;left:60px;width:340px;height:400px;background:#16172a;z-index:1;\"]);\n\nconst index = () => {\n  const dispatch = useDispatch();\n  const {\n    me\n  } = useSelector(state => state.user);\n  const {\n    studyPosts,\n    projectPosts,\n    forumPosts,\n    mainLoadPostsLoading\n  } = useSelector(state => state.post);\n  useEffect(() => {\n    //dispatch(mainLoadPostsReqeustAction());\n    //console.log(\"rerender\");\n    //dispatch(setUserRequestAction());\n    return () => {\n      dispatch(initializePostsAction());\n    };\n  }, []);\n  useEffect(async () => {\n    if (me) {\n      await firebase.auth().signInWithEmailAndPassword(me.email, me.email); // console.log(\"firebase 로그인 성공\");\n    } // firebase.auth().onAuthStateChanged((user) => {\n    //   console.log(\"firebase 새로 생성된 사용자 : \", user);\n    // });\n\n\n    let user = firebase.auth().currentUser; // console.log(\"firebase 로그인된 user : \", user);\n    //firebaseSetUserRequestAction(user);\n  }, [me]);\n  return /*#__PURE__*/_jsxs(Layout, {\n    children: [/*#__PURE__*/_jsx(Header, {}), /*#__PURE__*/_jsx(ContentWrapper, {\n      children: /*#__PURE__*/_jsxs(Row, {\n        children: [me ? /*#__PURE__*/_jsxs(Col, {\n          xs: 24,\n          sm: 8,\n          md: 8,\n          children: [/*#__PURE__*/_jsx(Row, {\n            children: /*#__PURE__*/_jsx(Col, {\n              xs: 24,\n              sm: 24,\n              md: 24,\n              children: /*#__PURE__*/_jsx(MyProfile, {\n                me: me\n              })\n            })\n          }), /*#__PURE__*/_jsx(Row, {\n            children: /*#__PURE__*/_jsxs(MainInfoWrapper, {\n              children: [/*#__PURE__*/_jsxs(MainInfoContent, {\n                className: \"main-info-content\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  style: {\n                    textAlign: \"center\"\n                  },\n                  children: /*#__PURE__*/_jsx(\"img\", {\n                    className: \"logo-image\",\n                    src: logo,\n                    alt: \"logo\"\n                  })\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  style: {\n                    color: \"#999\",\n                    fontSize: \"12px\",\n                    marginTop: \"20px\",\n                    textAlign: \"center\"\n                  },\n                  children: \"\\\"\\uD559\\uC0DD, \\uC9C1\\uC7A5\\uC778, \\uD504\\uB9AC\\uB79C\\uC11C, \\uB514\\uC790\\uC774\\uB108 \\uB4F1\\uC5D0\\uAC8C \\uD504\\uB85C\\uC81D\\uD2B8 \\uD639\\uC740 \\uC2A4\\uD130\\uB514 \\uBC0F \\uCEE4\\uBBA4\\uB2C8\\uD2F0 \\uAE30\\uB2A5\\uC744 \\uC81C\\uACF5\\uD558\\uB294 \\uC11C\\uBE44\\uC2A4 \\uD50C\\uB7AB\\uD3FC\\uC785\\uB2C8\\uB2E4.\\\"\"\n                })]\n              }), /*#__PURE__*/_jsx(MainInfoBackground, {\n                className: \"main-info-back\"\n              })]\n            })\n          }), /*#__PURE__*/_jsx(Row, {\n            children: /*#__PURE__*/_jsx(Col, {\n              xs: 24,\n              sm: 24,\n              md: 24,\n              children: mainLoadPostsLoading ? /*#__PURE__*/_jsx(ListWrapper, {\n                children: Array(8).fill(null).map((v, i) => /*#__PURE__*/_jsx(MainLoadingSkeleton, {\n                  active: true,\n                  loading: true\n                }, i))\n              }) : /*#__PURE__*/_jsx(ContentTemplate, {\n                forumData: forumPosts\n              })\n            })\n          })]\n        }) : /*#__PURE__*/_jsxs(Col, {\n          xs: 24,\n          sm: 8,\n          md: 8,\n          children: [/*#__PURE__*/_jsx(Row, {\n            children: /*#__PURE__*/_jsxs(MainInfoWrapper, {\n              children: [/*#__PURE__*/_jsxs(MainInfoContent, {\n                className: \"main-info-content\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  style: {\n                    textAlign: \"center\"\n                  },\n                  children: /*#__PURE__*/_jsx(\"img\", {\n                    className: \"logo-image\",\n                    src: logo,\n                    alt: \"logo\"\n                  })\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  style: {\n                    color: \"#999\",\n                    fontSize: \"12px\",\n                    marginTop: \"20px\",\n                    textAlign: \"center\"\n                  },\n                  children: \"\\\"\\uD559\\uC0DD, \\uC9C1\\uC7A5\\uC778, \\uD504\\uB9AC\\uB79C\\uC11C, \\uB514\\uC790\\uC774\\uB108 \\uB4F1\\uC5D0\\uAC8C \\uD504\\uB85C\\uC81D\\uD2B8 \\uD639\\uC740 \\uC2A4\\uD130\\uB514 \\uBC0F \\uCEE4\\uBBA4\\uB2C8\\uD2F0 \\uAE30\\uB2A5\\uC744 \\uC81C\\uACF5\\uD558\\uB294 \\uC11C\\uBE44\\uC2A4 \\uD50C\\uB7AB\\uD3FC\\uC785\\uB2C8\\uB2E4.\\\"\"\n                })]\n              }), /*#__PURE__*/_jsx(MainInfoBackground, {\n                className: \"main-info-back\"\n              })]\n            })\n          }), mainLoadPostsLoading ? /*#__PURE__*/_jsx(ListWrapper, {\n            children: Array(8).fill(null).map((v, i) => /*#__PURE__*/_jsx(MainLoadingSkeleton, {\n              active: true,\n              loading: true\n            }, i))\n          }) : /*#__PURE__*/_jsx(ContentTemplate, {\n            forumData: forumPosts\n          })]\n        }), /*#__PURE__*/_jsxs(Col, {\n          xs: 24,\n          sm: 16,\n          md: 16,\n          children: [/*#__PURE__*/_jsx(Row, {\n            children: /*#__PURE__*/_jsxs(Col, {\n              xs: 24,\n              sm: 24,\n              md: 24,\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                style: {\n                  padding: \"20px\",\n                  paddingBottom: \"0\"\n                },\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(\"span\", {\n                    style: {\n                      fontSize: \"18px\",\n                      fontWeight: \"600\"\n                    },\n                    children: \"\\uC2A4\\uD130\\uB514\"\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(\"span\", {\n                    style: {\n                      fontSize: \"12px\",\n                      color: \"#999\"\n                    },\n                    children: \"\\uC2A4\\uD130\\uB514 \\uBAA8\\uC9D1, \\uCC38\\uC5EC \\uACF5\\uAC04\\uC785\\uB2C8\\uB2E4. \\uAD00\\uC2EC\\uC788\\uB294 \\uC2A4\\uD130\\uB514\\uC5D0 \\uC9C0\\uC6D0\\uD558\\uAC70\\uB098 \\uD300\\uC6D0\\uC744 \\uBAA8\\uC9D1\\uD574\\uBCF4\\uC138\\uC694.\"\n                  })\n                })]\n              }), mainLoadPostsLoading ? /*#__PURE__*/_jsx(ListWrapper, {\n                children: Array(5).fill(null).map((v, i) => /*#__PURE__*/_jsx(MainLoadingSkeleton, {\n                  active: true,\n                  loading: true\n                }, i))\n              }) : /*#__PURE__*/_jsx(ListWrapper, {\n                children: /*#__PURE__*/_jsx(List, {\n                  data: studyPosts,\n                  type: \"study\"\n                })\n              })]\n            })\n          }), /*#__PURE__*/_jsx(Row, {\n            children: /*#__PURE__*/_jsxs(Col, {\n              xs: 24,\n              sm: 24,\n              md: 24,\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                style: {\n                  padding: \"20px\",\n                  paddingBottom: \"0\"\n                },\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(\"span\", {\n                    style: {\n                      fontSize: \"18px\",\n                      fontWeight: \"600\"\n                    },\n                    children: \"\\uD504\\uB85C\\uC81D\\uD2B8\"\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(\"span\", {\n                    style: {\n                      fontSize: \"12px\",\n                      color: \"#999\"\n                    },\n                    children: \"\\uD504\\uB85C\\uC81D\\uD2B8 \\uBAA8\\uC9D1, \\uCC38\\uC5EC \\uACF5\\uAC04\\uC785\\uB2C8\\uB2E4. \\uAD00\\uC2EC\\uC788\\uB294 \\uD504\\uB85C\\uC81D\\uD2B8\\uC5D0 \\uC9C0\\uC6D0\\uD558\\uAC70\\uB098 \\uD300\\uC6D0\\uC744 \\uBAA8\\uC9D1\\uD574\\uBCF4\\uC138\\uC694.\"\n                  })\n                })]\n              }), mainLoadPostsLoading ? /*#__PURE__*/_jsx(ListWrapper, {\n                children: Array(5).fill(null).map((v, i) => /*#__PURE__*/_jsx(MainLoadingSkeleton, {\n                  active: true,\n                  loading: true\n                }, i))\n              }) : /*#__PURE__*/_jsx(ListWrapper, {\n                children: /*#__PURE__*/_jsx(List, {\n                  data: projectPosts,\n                  type: \"project\"\n                })\n              })]\n            })\n          })]\n        })]\n      })\n    }), /*#__PURE__*/_jsx(Footer, {})]\n  });\n}; // 프론트 서버에서 실행되는 코드\n\n\nexport const getServerSideProps = wrapper.getServerSideProps(async context => {\n  //console.log(context);\n  const cookie = context.req ? context.req.headers.cookie : \"\";\n  client.defaults.headers.Cookie = \"\";\n\n  if (context.req && cookie) {\n    //console.log(\"fuckcookie\", cookie);\n    client.defaults.withCredentials = true;\n    client.defaults.headers.Cookie = cookie;\n  }\n\n  context.store.dispatch(setUserRequestAction());\n  context.store.dispatch(mainLoadPostsReqeustAction()); //context.store.dispatch(END);\n\n  context.store.dispatch(END);\n  await context.store.sagaTask.toPromise();\n});\nexport default index;","map":null,"metadata":{},"sourceType":"module"}