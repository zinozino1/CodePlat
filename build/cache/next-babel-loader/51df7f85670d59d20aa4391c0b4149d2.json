{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport { Card, Form, Input, Button, Upload, Checkbox } from \"antd\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport shortid from \"shortid\";\nimport { SERVER_URL } from \"../../lib/constant/constant\";\nimport { UploadOutlined } from \"@ant-design/icons\";\nimport Link from \"next/link\";\nimport axios from \"axios\";\nimport Router from \"next/router\";\nimport firebase from \"../../firebase\";\nvar EditProfileFormWrapper = styled(Form).withConfig({\n  displayName: \"EditProfileForm__EditProfileFormWrapper\",\n  componentId: \"sc-149yjtm-0\"\n})([\".image-edit-btn{&:hover{color:#111;border:1px solid #313355;}}.password-edit-btn{&:hover{color:#111;border:1px solid #313355;}}@media (max-width:900px){width:100%;.profile-card{margin:0 auto;}}\"]);\nvar RegisterInputItemWrapper = styled(Form.Item).withConfig({\n  displayName: \"EditProfileForm__RegisterInputItemWrapper\",\n  componentId: \"sc-149yjtm-1\"\n})([\".ant-form-item-label{text-align:left;}.email-code{width:200px;}.ant-form-item-control{}@media (max-width:768px){flex-direction:column;}\"]);\nvar ProfileItemWrapper = styled.div.withConfig({\n  displayName: \"EditProfileForm__ProfileItemWrapper\",\n  componentId: \"sc-149yjtm-2\"\n})([\"margin:20px 0;\"]);\n\nvar EditProfileForm = function EditProfileForm(_ref) {\n  var onChangeProfileImage = _ref.onChangeProfileImage,\n      onDeleteProfileImage = _ref.onDeleteProfileImage,\n      onChangeNickname = _ref.onChangeNickname,\n      onChangeGithubId = _ref.onChangeGithubId,\n      onToggleGitSecret = _ref.onToggleGitSecret,\n      gitSecret = _ref.gitSecret;\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      me = _useSelector.me;\n\n  var onDeleteAccount = useCallback(function () {\n    var deleteConfirm = confirm(\"정말 회원 탈퇴를 진행하시겠습니까?\");\n\n    if (deleteConfirm) {\n      axios[\"delete\"](\"/api/users/\".concat(me._id)).then( /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(res) {\n          var user;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  alert(\"회원 탈퇴 처리가 정상적으로 처리되었습니다. CodePlat을 이용해주셔서 감사합니다.\");\n                  user = firebase.auth().currentUser;\n\n                  if (!user) {\n                    _context2.next = 5;\n                    break;\n                  }\n\n                  _context2.next = 5;\n                  return user[\"delete\"]().then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.next = 2;\n                            return firebase.database().ref(\"users\").child(user.uid).remove();\n\n                          case 2:\n                            console.log(\"firebase 탈퇴 성공\");\n\n                          case 3:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  })))[\"catch\"](function (err) {\n                    console.log(err);\n                  });\n\n                case 5:\n                  Router.push(\"/\");\n\n                case 6:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function (_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }())[\"catch\"](function (err) {\n        console.log(err);\n      });\n    } else {}\n  }, [me]);\n  if (!me) return null;\n  return /*#__PURE__*/_jsx(EditProfileFormWrapper, {\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"site-card-border-less-wrapper\",\n      children: /*#__PURE__*/_jsxs(Card, {\n        title: \"\\uD504\\uB85C\\uD544 \\uC218\\uC815\",\n        bordered: true,\n        style: {\n          width: 300\n        },\n        className: \"profile-card\",\n        children: [/*#__PURE__*/_jsxs(ProfileItemWrapper, {\n          children: [/*#__PURE__*/_jsx(\"span\", {\n            children: \"\\uB2C9\\uB124\\uC784\"\n          }), /*#__PURE__*/_jsx(Input, {\n            placeholder: \"\\uB2C9\\uB124\\uC784\",\n            onChange: onChangeNickname,\n            defaultValue: me && me.nickname\n          })]\n        }), /*#__PURE__*/_jsxs(ProfileItemWrapper, {\n          children: [/*#__PURE__*/_jsx(\"span\", {\n            children: \"\\uAE43\\uD5C8\\uBE0C\"\n          }), /*#__PURE__*/_jsx(Input, {\n            placeholder: \"\\uAE43\\uD5C8\\uBE0C\",\n            onChange: onChangeGithubId,\n            defaultValue: me && me.githubUrl\n          }), /*#__PURE__*/_jsx(Checkbox, {\n            onChange: onToggleGitSecret,\n            defaultChecked: me && me.secretGithub,\n            children: \"\\uBE44\\uACF5\\uAC1C\"\n          })]\n        }), /*#__PURE__*/_jsxs(ProfileItemWrapper, {\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            children: \"\\uD504\\uB85C\\uD544 \\uC0AC\\uC9C4 \\uBCC0\\uACBD\"\n          }), /*#__PURE__*/_jsx(Upload, {\n            name: \"logo\",\n            listType: \"picture\",\n            accept: \"image/*\",\n            beforeUpload: onChangeProfileImage,\n            maxCount: 1,\n            defaultFileList: me.avatarUrl && [{\n              uid: shortid.generate(),\n              url: \"\".concat(SERVER_URL, \"/\").concat(me.avatarUrl),\n              thumbUrl: \"\".concat(SERVER_URL, \"/\").concat(me.avatarUrl),\n              name: me.avatarUrl,\n              status: \"done\"\n            }],\n            onRemove: onDeleteProfileImage,\n            children: /*#__PURE__*/_jsx(Button, {\n              className: \"image-edit-btn\",\n              icon: /*#__PURE__*/_jsx(UploadOutlined, {}),\n              children: \"\\uC774\\uBBF8\\uC9C0 \\uBCC0\\uACBD\"\n            })\n          })]\n        }), /*#__PURE__*/_jsx(Link, {\n          href: \"/auth/passwordUpdate\",\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: /*#__PURE__*/_jsx(Button, {\n              className: \"password-edit-btn\",\n              block: true,\n              children: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uBCC0\\uACBD\"\n            })\n          })\n        }), /*#__PURE__*/_jsx(Button, {\n          type: \"danger\",\n          block: true,\n          style: {\n            marginTop: \"10px\"\n          },\n          onClick: onDeleteAccount,\n          children: \"\\uD68C\\uC6D0 \\uD0C8\\uD1F4\"\n        })]\n      })\n    })\n  });\n};\n\nexport default EditProfileForm;","map":null,"metadata":{},"sourceType":"module"}