{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { Card, Radio, Button, Pagination } from \"antd\";\nimport List from \"../common/contents/List\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\";\nimport shortid from \"shortid\";\nimport Link from \"next/link\";\nimport moment from \"moment\";\nvar MyActivityWrapper = styled.div.withConfig({\n  displayName: \"MyActivityTemplate__MyActivityWrapper\",\n  componentId: \"sc-7cup97-0\"\n})([\"display:flex;.activity_type{flex:1;padding:20px;.ant-radio-group{.ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled):first-child{border-color:#4f528a;}.ant-radio-button-wrapper{width:200px;text-align:center;border-radius:0px;}span{color:#111;}}}.myActivity{flex:4;padding:20px;.ant-tabs-tab-btn{color:#111;}.ant-tabs-ink-bar{background:#4f528a;}}@media (max-width:768px){display:block;}\"]);\nvar MyCommentWrapper = styled.div.withConfig({\n  displayName: \"MyActivityTemplate__MyCommentWrapper\",\n  componentId: \"sc-7cup97-1\"\n})([\"margin:20px 0;padding-bottom:5px;border-bottom:1px solid #ddd;\"]);\n\nvar MyActivityTemplate = function MyActivityTemplate() {\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      me = _useSelector.me;\n\n  var _useState = useState(\"study\"),\n      currentType = _useState[0],\n      setCurrentType = _useState[1];\n\n  var onClickTypeBtn = useCallback(function (e) {\n    setContents(null);\n    setPosts(null);\n    setCurrentType(e.target.value);\n  }, []);\n\n  var _useState2 = useState({\n    key: \"post\",\n    tab: \"게시글\"\n  }),\n      currTab = _useState2[0],\n      setCurrTab = _useState2[1];\n\n  var _onTabChange = function onTabChange(key, type) {\n    setContents(null);\n    setPosts(null);\n    setCurrTab(_defineProperty({}, type, key));\n  };\n\n  var tabListTitle = [{\n    key: \"post\",\n    tab: \"게시글\"\n  }, {\n    key: \"comments\",\n    tab: \"댓글\"\n  }, {\n    key: \"scraps\",\n    tab: \"스크랩\"\n  }];\n\n  var _useState3 = useState(false),\n      loading = _useState3[0],\n      setLoading = _useState3[1];\n\n  var _useState4 = useState(null),\n      contents = _useState4[0],\n      setContents = _useState4[1];\n\n  var _useState5 = useState(null),\n      posts = _useState5[0],\n      setPosts = _useState5[1];\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!me) {\n              _context.next = 5;\n              break;\n            }\n\n            setLoading(true); //console.log({ currentType, key: currTab.key });\n\n            _context.next = 4;\n            return axios.get(\"/api/users/\".concat(me._id, \"?type=\").concat(currentType, \"&sort=\").concat(currTab.key)).then(function (res) {\n              //console.log(res.data);\n              //console.log(\"activities : \", res.data.activities);\n              setContents(res.data.activities);\n\n              if (res.data.posts) {\n                setPosts(res.data.posts);\n              }\n            })[\"catch\"](function (err) {\n              console.log(err);\n            });\n\n          case 4:\n            setLoading(false);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), [currentType, currTab, me]); // useEffect(() => {\n  //   console.log(\"contents : \", contents);\n  //   console.log(\"posts : \", posts);\n  // }, [contents, posts]);\n\n  if (!contents) return null;\n  if (loading) return null;\n  return /*#__PURE__*/_jsxs(MyActivityWrapper, {\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"activity_type\",\n      children: /*#__PURE__*/_jsxs(Radio.Group, {\n        onChange: onClickTypeBtn,\n        defaultValue: currentType,\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(Radio.Button, {\n            value: \"study\",\n            onChange: onClickTypeBtn,\n            children: \"\\uC2A4\\uD130\\uB514\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(Radio.Button, {\n            value: \"project\",\n            onChange: onClickTypeBtn,\n            children: \"\\uD504\\uB85C\\uC81D\\uD2B8\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(Radio.Button, {\n            value: \"forum\",\n            onChange: onClickTypeBtn,\n            children: \"\\uD3EC\\uB7FC\"\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"myActivity\",\n      children: /*#__PURE__*/_jsxs(Card, {\n        style: {\n          width: \"100%\"\n        },\n        tabList: tabListTitle,\n        activeTabKey: currTab.key,\n        onTabChange: function onTabChange(key) {\n          _onTabChange(key, \"key\");\n        },\n        children: [currTab.key === \"post\" &&\n        /*#__PURE__*/\n        //   contents.map((v, i) => {\n        //     return <div key={i}>{v.title}</div>;\n        //   })\n        _jsx(\"div\", {\n          style: {\n            overflow: \"auto\",\n            height: \"59vh\"\n          },\n          children: /*#__PURE__*/_jsx(List, {\n            data: contents,\n            type: currentType\n          })\n        }), currTab.key === \"comments\" && /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            overflow: \"auto\",\n            height: \"59vh\"\n          },\n          children: contents.map(function (v, i) {\n            var flag = false;\n            var post = null;\n            posts.forEach(function (s, j) {\n              if (v.postId === s._id) {\n                flag = true; // postTitle = s.title;\n\n                post = s;\n              }\n            });\n\n            if (flag) {\n              return /*#__PURE__*/_jsxs(MyCommentWrapper, {\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(\"span\", {\n                    style: {\n                      fontSize: \"16px\",\n                      fontWeight: \"500\"\n                    },\n                    children: v.content\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  children: [/*#__PURE__*/_jsx(Link, {\n                    href: \"articles/\".concat(post.type, \"/\").concat(post._id),\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      children: post.title\n                    })\n                  }), \" \", \"\\uAE00\\uC5D0 \\uB0A8\\uAE34 \\uB313\\uAE00\"]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(\"span\", {\n                    style: {\n                      color: \"#999\",\n                      fontSize: \"10px\"\n                    },\n                    children: moment(v.createdAt).format(\"MM/DD HH:mm\")\n                  })\n                })]\n              }, i);\n            }\n          })\n        }), currTab.key === \"scraps\" && /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            overflow: \"auto\",\n            height: \"59vh\"\n          },\n          children: /*#__PURE__*/_jsx(List, {\n            data: posts,\n            type: currentType\n          })\n        })]\n      })\n    })]\n  });\n};\n\nexport default MyActivityTemplate;","map":null,"metadata":{},"sourceType":"module"}