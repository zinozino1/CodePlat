{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useCallback } from \"react\";\nimport { Card, Avatar, Button, Image, Popover } from \"antd\";\nimport styled from \"styled-components\";\nimport Link from \"next/link\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { logoutRequestAction } from \"../../reducers/user\";\nimport { SERVER_URL } from \"../../lib/constant/constant\";\nimport ProfileModal from \"../modal/ProfileModal\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport firebase from \"../../firebase\";\n/**\n * @author 박진호\n * @version 1.0\n * @summary 메인 페이지 내 프로필 컴포넌트\n */\n// style\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst CardWrapper = styled.div.withConfig({\n  displayName: \"MyProfile__CardWrapper\",\n  componentId: \"sc-17ueru1-0\"\n})([\"padding:20px;\"]);\nconst ButtonsWrapper = styled.div.withConfig({\n  displayName: \"MyProfile__ButtonsWrapper\",\n  componentId: \"sc-17ueru1-1\"\n})([\"margin-top:30px;text-align:center;.mypage{&:hover{color:#313355;border:1px solid #313355;}}.logout{margin-left:10px;background:#313355;color:#fff;&:hover{border:1px solid #313355;}}\"]);\n\nconst MyProfile = ({\n  me\n}) => {\n  // redux\n  const dispatch = useDispatch();\n  const {\n    logoutLoading\n  } = useSelector(state => state.user); // event listener\n\n  const onLogout = useCallback(async () => {\n    let user = firebase.auth().currentUser;\n\n    if (user) {\n      await firebase.auth().signOut().then(() => {});\n      let firebaseMe = null;\n      await firebase.database().ref(\"users\").child(user.uid).once(\"value\", function (data) {\n        firebaseMe = data.val();\n      });\n      await firebase.database().ref(\"users\").child(user.uid).update(_objectSpread(_objectSpread({}, firebaseMe), {}, {\n        isInMypage: false\n      }));\n    }\n\n    dispatch(logoutRequestAction());\n  }, []);\n  return /*#__PURE__*/_jsx(CardWrapper, {\n    children: /*#__PURE__*/_jsxs(Card, {\n      children: [/*#__PURE__*/_jsx(Card.Meta, {\n        title: me.nickname,\n        avatar: /*#__PURE__*/_jsx(Popover, {\n          content: /*#__PURE__*/_jsx(\"div\", {\n            onClick: e => {\n              e.stopPropagation();\n            },\n            children: /*#__PURE__*/_jsx(ProfileModal, {\n              writer: me\n            })\n          }),\n          children: /*#__PURE__*/_jsx(Avatar, {\n            style: {\n              cursor: \"pointer\"\n            },\n            size: 32,\n            src: me.avatarUrl !== \"\" && me.avatarUrl && /*#__PURE__*/_jsx(Image, {\n              width: 32,\n              height: 32,\n              src: `${SERVER_URL}/${me.avatarUrl}`\n            }),\n            icon: /*#__PURE__*/_jsx(UserOutlined, {})\n          })\n        })\n      }), /*#__PURE__*/_jsxs(ButtonsWrapper, {\n        children: [/*#__PURE__*/_jsx(Link, {\n          href: \"/mypage\",\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: /*#__PURE__*/_jsx(Button, {\n              className: \"mypage\",\n              children: \"\\uB9C8\\uC774\\uD398\\uC774\\uC9C0\"\n            })\n          })\n        }), /*#__PURE__*/_jsx(Button, {\n          className: \"logout\",\n          onClick: onLogout,\n          loading: logoutLoading,\n          children: \"\\uB85C\\uADF8\\uC544\\uC6C3\"\n        })]\n      })]\n    })\n  });\n};\n\nexport default MyProfile;","map":null,"metadata":{},"sourceType":"module"}