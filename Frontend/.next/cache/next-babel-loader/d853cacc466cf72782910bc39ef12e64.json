{"ast":null,"code":"var _jsxFileName = \"/Users/jinho/Project/ProjectFrontend/components/mypage/EditProfile.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport EditProfileForm from \"./EditProfileForm\";\nimport SkillFilterForm from \"../common/contents/SkillFilterForm\";\nimport { Button, Card } from \"antd\";\nimport { useSelector } from \"react-redux\";\nimport { SERVER_URL } from \"../../lib/constant/constant\";\nimport shortid from \"shortid\";\nimport { message } from \"antd\";\nimport axios from \"axios\";\nimport FormData from \"form-data\";\n/**\n * @author 박진호\n * @version 1.0\n * @summary 프로필 수정 폼 + 기술 스택 수정 폼 컨테이너 컴포넌트\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar ProfileReviseFormWrapper = styled.div.withConfig({\n  displayName: \"EditProfile__ProfileReviseFormWrapper\",\n  componentId: \"sc-2rim2x-0\"\n})([\"display:flex;padding:2rem 0;.edit-profile-form{flex:1;padding:20px;}.skill-filter-form{flex:2;padding:20px;}@media (max-width:900px){flex-direction:column;}\"]);\n_c = ProfileReviseFormWrapper;\n\nvar EditProfile = function EditProfile() {\n  _s();\n\n  // redux\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      me = _useSelector.me;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.skill;\n  }),\n      skill = _useSelector2.skill; // local state\n\n\n  var _useState = useState(\"\"),\n      nickname = _useState[0],\n      setNickname = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      githubId = _useState2[0],\n      setGithubId = _useState2[1];\n\n  var _useState3 = useState(false),\n      gitSecret = _useState3[0],\n      setGitSecret = _useState3[1];\n\n  var _useState4 = useState(null),\n      profileImage = _useState4[0],\n      setProfileImage = _useState4[1];\n\n  var _useState5 = useState(false),\n      loading = _useState5[0],\n      setLoading = _useState5[1]; // event listener\n\n\n  var onChangeNickname = useCallback(function (e) {\n    setNickname(e.target.value);\n  }, []);\n  var onChangeGithubId = useCallback(function (e) {\n    setGithubId(e.target.value);\n  }, []);\n  var onToggleGitSecret = useCallback(function () {\n    setGitSecret(!gitSecret);\n  }, [gitSecret]);\n  var onChangeProfileImage = useCallback(function (e) {\n    setProfileImage(e);\n  }, []);\n  var onDeleteProfileImage = useCallback(function (e) {\n    setProfileImage(null);\n  }, []);\n  var onSubmit = useCallback(function () {\n    setLoading(true);\n    var config = {\n      headers: {\n        Accept: \"application/json\",\n        enctype: \"multipart/form-data\"\n      }\n    };\n    var formData = new FormData();\n    formData.append(\"nickname\", nickname);\n    formData.append(\"githubUrl\", githubId);\n    formData.append(\"techStack\", JSON.stringify(skill));\n    formData.append(\"secretGithub\", gitSecret);\n    formData.append(\"avatar\", profileImage);\n    axios.patch(\"/api/users\", formData, config).then(function (res) {\n      submitDoneMessage();\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n    setLoading(false);\n  }, [skill, nickname, githubId, gitSecret, profileImage]); // helper method\n\n  var submitDoneMessage = function submitDoneMessage() {\n    message.success({\n      content: \"저장 완료!\",\n      className: \"custom-class\",\n      style: {\n        marginTop: \"5vh\"\n      }\n    });\n  }; // hooks\n\n\n  useEffect(function () {\n    setProfileImage({\n      uid: shortid.generate(),\n      url: \"\".concat(SERVER_URL, \"/\").concat(me.avatarUrl),\n      thumbUrl: \"\".concat(SERVER_URL, \"/\").concat(me.avatarUrl),\n      status: \"done\"\n    });\n    setNickname(me.nickname);\n    setGithubId(me.githubId);\n  }, [me]);\n  useEffect(function () {\n    if (me) {\n      setGitSecret(me.secretGithub);\n      setGithubId(me.githubUrl);\n    }\n  }, [me]);\n  if (!me) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ProfileReviseFormWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"edit-profile-form\",\n        children: /*#__PURE__*/_jsxDEV(EditProfileForm, {\n          onChangeProfileImage: onChangeProfileImage,\n          onDeleteProfileImage: onDeleteProfileImage,\n          onChangeNickname: onChangeNickname,\n          onChangeGithubId: onChangeGithubId,\n          onToggleGitSecret: onToggleGitSecret,\n          gitSecret: gitSecret\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"skill-filter-form\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          title: \"\\uAD00\\uC2EC \\uAE30\\uC220 \\uC218\\uC815\",\n          bordered: true,\n          children: [\" \", /*#__PURE__*/_jsxDEV(SkillFilterForm, {\n            type: \"mypage\",\n            values: me.techStack,\n            isEdit: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: onSubmit,\n        loading: loading,\n        style: {\n          background: \"#313355\",\n          color: \"#fff\",\n          border: \"1px solid #313355\"\n        },\n        children: \"\\uC800\\uC7A5\\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(EditProfile, \"oXRAhuOr8F/ROAqLUYWUVxT4AqI=\", false, function () {\n  return [useSelector, useSelector];\n});\n\n_c2 = EditProfile;\nexport default EditProfile;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ProfileReviseFormWrapper\");\n$RefreshReg$(_c2, \"EditProfile\");","map":{"version":3,"sources":["/Users/jinho/Project/ProjectFrontend/components/mypage/EditProfile.jsx"],"names":["React","useState","useCallback","useEffect","styled","EditProfileForm","SkillFilterForm","Button","Card","useSelector","SERVER_URL","shortid","message","axios","FormData","ProfileReviseFormWrapper","div","EditProfile","state","user","me","skill","nickname","setNickname","githubId","setGithubId","gitSecret","setGitSecret","profileImage","setProfileImage","loading","setLoading","onChangeNickname","e","target","value","onChangeGithubId","onToggleGitSecret","onChangeProfileImage","onDeleteProfileImage","onSubmit","config","headers","Accept","enctype","formData","append","JSON","stringify","patch","then","res","submitDoneMessage","err","console","log","success","content","className","style","marginTop","uid","generate","url","avatarUrl","thumbUrl","status","secretGithub","githubUrl","techStack","textAlign","background","color","border"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport EditProfileForm from \"./EditProfileForm\";\nimport SkillFilterForm from \"../common/contents/SkillFilterForm\";\nimport { Button, Card } from \"antd\";\nimport { useSelector } from \"react-redux\";\nimport { SERVER_URL } from \"../../lib/constant/constant\";\nimport shortid from \"shortid\";\nimport { message } from \"antd\";\nimport axios from \"axios\";\nimport FormData from \"form-data\";\n\n/**\n * @author 박진호\n * @version 1.0\n * @summary 프로필 수정 폼 + 기술 스택 수정 폼 컨테이너 컴포넌트\n */\n\nconst ProfileReviseFormWrapper = styled.div`\n  display: flex;\n  padding: 2rem 0;\n  .edit-profile-form {\n    flex: 1;\n    padding: 20px;\n  }\n  .skill-filter-form {\n    flex: 2;\n    padding: 20px;\n  }\n  @media (max-width: 900px) {\n    flex-direction: column;\n  }\n`;\n\nconst EditProfile = () => {\n  // redux\n\n  const { me } = useSelector((state) => state.user);\n  const { skill } = useSelector((state) => state.skill);\n\n  // local state\n\n  const [nickname, setNickname] = useState(\"\");\n  const [githubId, setGithubId] = useState(\"\");\n  const [gitSecret, setGitSecret] = useState(false);\n  const [profileImage, setProfileImage] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  // event listener\n\n  const onChangeNickname = useCallback((e) => {\n    setNickname(e.target.value);\n  }, []);\n  const onChangeGithubId = useCallback((e) => {\n    setGithubId(e.target.value);\n  }, []);\n  const onToggleGitSecret = useCallback(() => {\n    setGitSecret(!gitSecret);\n  }, [gitSecret]);\n\n  const onChangeProfileImage = useCallback((e) => {\n    setProfileImage(e);\n  }, []);\n\n  const onDeleteProfileImage = useCallback((e) => {\n    setProfileImage(null);\n  }, []);\n\n  const onSubmit = useCallback(() => {\n    setLoading(true);\n    const config = {\n      headers: {\n        Accept: \"application/json\",\n        enctype: \"multipart/form-data\",\n      },\n    };\n    const formData = new FormData();\n    formData.append(\"nickname\", nickname);\n    formData.append(\"githubUrl\", githubId);\n    formData.append(\"techStack\", JSON.stringify(skill));\n    formData.append(\"secretGithub\", gitSecret);\n    formData.append(\"avatar\", profileImage);\n\n    axios\n      .patch(`/api/users`, formData, config)\n      .then((res) => {\n        submitDoneMessage();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    setLoading(false);\n  }, [skill, nickname, githubId, gitSecret, profileImage]);\n\n  // helper method\n\n  const submitDoneMessage = () => {\n    message.success({\n      content: \"저장 완료!\",\n      className: \"custom-class\",\n      style: {\n        marginTop: \"5vh\",\n      },\n    });\n  };\n\n  // hooks\n\n  useEffect(() => {\n    setProfileImage({\n      uid: shortid.generate(),\n      url: `${SERVER_URL}/${me.avatarUrl}`,\n      thumbUrl: `${SERVER_URL}/${me.avatarUrl}`,\n      status: \"done\",\n    });\n    setNickname(me.nickname);\n    setGithubId(me.githubId);\n  }, [me]);\n\n  useEffect(() => {\n    if (me) {\n      setGitSecret(me.secretGithub);\n      setGithubId(me.githubUrl);\n    }\n  }, [me]);\n\n  if (!me) return null;\n\n  return (\n    <>\n      <ProfileReviseFormWrapper>\n        <div className=\"edit-profile-form\">\n          <EditProfileForm\n            onChangeProfileImage={onChangeProfileImage}\n            onDeleteProfileImage={onDeleteProfileImage}\n            onChangeNickname={onChangeNickname}\n            onChangeGithubId={onChangeGithubId}\n            onToggleGitSecret={onToggleGitSecret}\n            gitSecret={gitSecret}\n          />\n        </div>\n        <div className=\"skill-filter-form\">\n          <Card title=\"관심 기술 수정\" bordered={true}>\n            {\" \"}\n            <SkillFilterForm\n              type=\"mypage\"\n              values={me.techStack}\n              isEdit={true}\n            />\n          </Card>\n        </div>\n      </ProfileReviseFormWrapper>\n      <div\n        style={{\n          textAlign: \"center\",\n        }}\n      >\n        <Button\n          type=\"primary\"\n          onClick={onSubmit}\n          loading={loading}\n          style={{\n            background: \"#313355\",\n            color: \"#fff\",\n            border: \"1px solid #313355\",\n          }}\n        >\n          저장하기\n        </Button>\n      </div>\n    </>\n  );\n};\n\nexport default EditProfile;\n"]},"metadata":{},"sourceType":"module"}