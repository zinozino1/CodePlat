{"ast":null,"code":"import React, { useState, useEffect, useCallback } from \"react\";\nimport { Card, Radio } from \"antd\";\nimport List from \"../common/contents/List\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\";\nimport Link from \"next/link\";\nimport moment from \"moment\";\n/**\n * @author 박진호\n * @version 1.0\n * @summary 유저 활동 정보(게시글, 댓글, 스크랩) 컴포넌트\n */\n// style\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst MyActivityWrapper = styled.div.withConfig({\n  displayName: \"MyActivityTemplate__MyActivityWrapper\",\n  componentId: \"sc-7cup97-0\"\n})([\"display:flex;.activity_type{flex:1;padding:20px;.ant-radio-group{.ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled):first-child{border-color:#4f528a;}.ant-radio-button-wrapper{width:200px;text-align:center;border-radius:0px;}span{color:#111;}}}.myActivity{flex:4;padding:20px;.ant-tabs-tab-btn{color:#111;}.ant-tabs-ink-bar{background:#4f528a;}}@media (max-width:768px){display:block;}\"]);\nconst MyCommentWrapper = styled.div.withConfig({\n  displayName: \"MyActivityTemplate__MyCommentWrapper\",\n  componentId: \"sc-7cup97-1\"\n})([\"margin:20px 0;padding-bottom:5px;border-bottom:1px solid #ddd;\"]);\n\nconst MyActivityTemplate = () => {\n  // redux\n  const {\n    me\n  } = useSelector(state => state.user); // local state\n\n  const {\n    0: currentType,\n    1: setCurrentType\n  } = useState(\"study\");\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: contents,\n    1: setContents\n  } = useState(null);\n  const {\n    0: posts,\n    1: setPosts\n  } = useState(null);\n  const {\n    0: currTab,\n    1: setCurrTab\n  } = useState({\n    key: \"post\",\n    tab: \"게시글\"\n  }); // event listener\n\n  const onClickTypeBtn = useCallback(e => {\n    setContents(null);\n    setPosts(null);\n    setCurrentType(e.target.value);\n  }, []);\n\n  const onTabChange = (key, type) => {\n    setContents(null);\n    setPosts(null);\n    setCurrTab({\n      [type]: key\n    });\n  }; // helper variable\n\n\n  const tabListTitle = [{\n    key: \"post\",\n    tab: \"게시글\"\n  }, {\n    key: \"comments\",\n    tab: \"댓글\"\n  }, {\n    key: \"scraps\",\n    tab: \"스크랩\"\n  }]; // hooks\n\n  useEffect(async () => {\n    if (me) {\n      setLoading(true);\n      await axios.get(`/api/users/${me._id}?type=${currentType}&sort=${currTab.key}`).then(res => {\n        setContents(res.data.activities);\n\n        if (res.data.posts) {\n          setPosts(res.data.posts);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n      setLoading(false);\n    }\n  }, [currentType, currTab, me]);\n  if (!contents) return null;\n  if (loading) return null;\n  return /*#__PURE__*/_jsxs(MyActivityWrapper, {\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"activity_type\",\n      children: /*#__PURE__*/_jsxs(Radio.Group, {\n        onChange: onClickTypeBtn,\n        defaultValue: currentType,\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(Radio.Button, {\n            value: \"study\",\n            onChange: onClickTypeBtn,\n            children: \"\\uC2A4\\uD130\\uB514\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(Radio.Button, {\n            value: \"project\",\n            onChange: onClickTypeBtn,\n            children: \"\\uD504\\uB85C\\uC81D\\uD2B8\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(Radio.Button, {\n            value: \"forum\",\n            onChange: onClickTypeBtn,\n            children: \"\\uD3EC\\uB7FC\"\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"myActivity\",\n      children: /*#__PURE__*/_jsxs(Card, {\n        style: {\n          width: \"100%\"\n        },\n        tabList: tabListTitle,\n        activeTabKey: currTab.key,\n        onTabChange: key => {\n          onTabChange(key, \"key\");\n        },\n        children: [currTab.key === \"post\" && /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            overflow: \"auto\",\n            height: \"59vh\"\n          },\n          children: /*#__PURE__*/_jsx(List, {\n            data: contents,\n            type: currentType\n          })\n        }), currTab.key === \"comments\" && /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            overflow: \"auto\",\n            height: \"59vh\"\n          },\n          children: contents.map((v, i) => {\n            let flag = false;\n            let post = null;\n            posts.forEach((s, j) => {\n              if (v.postId === s._id) {\n                flag = true;\n                post = s;\n              }\n            });\n\n            if (flag) {\n              return /*#__PURE__*/_jsxs(MyCommentWrapper, {\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(\"span\", {\n                    style: {\n                      fontSize: \"16px\",\n                      fontWeight: \"500\"\n                    },\n                    children: v.content\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  children: [/*#__PURE__*/_jsx(Link, {\n                    href: `articles/${post.type}/${post._id}`,\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      children: post.title\n                    })\n                  }), \" \", \"\\uAE00\\uC5D0 \\uB0A8\\uAE34 \\uB313\\uAE00\"]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(\"span\", {\n                    style: {\n                      color: \"#999\",\n                      fontSize: \"10px\"\n                    },\n                    children: moment(v.createdAt).format(\"MM/DD HH:mm\")\n                  })\n                })]\n              }, i);\n            }\n          })\n        }), currTab.key === \"scraps\" && /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            overflow: \"auto\",\n            height: \"59vh\"\n          },\n          children: /*#__PURE__*/_jsx(List, {\n            data: posts,\n            type: currentType\n          })\n        })]\n      })\n    })]\n  });\n};\n\nexport default MyActivityTemplate;","map":null,"metadata":{},"sourceType":"module"}