{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/jinho/Project/ProjectFrontend/Frontend/components/common/contents/ReCommentListItem.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { Avatar, Popover, Comment, Input, Image, Checkbox } from \"antd\";\nimport ProfileModal from \"../../modal/ProfileModal\";\nimport { UserOutlined, LockOutlined, LikeOutlined, LikeFilled } from \"@ant-design/icons\";\nimport { useDispatch } from \"react-redux\";\nimport useToggle from \"../../../hooks/useToggle\";\nimport { SERVER_URL } from \"../../../lib/constant/constant\";\nimport { likeCommentRequestAction, unLikeCommentRequestAction } from \"../../../reducers/post\";\nimport Router from \"next/router\";\nimport axios from \"axios\";\n/**\n * @author 박진호\n * @version 1.0\n * @summary 포스트 대댓글 아이템 컴포넌트\n */\n// style\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar ReApplyFormWrapper = styled.div.withConfig({\n  displayName: \"ReCommentListItem__ReApplyFormWrapper\",\n  componentId: \"sc-14mn7tx-0\"\n})([\"width:800px;display:flex;@media (max-width:768px){width:200px;display:block;}\"]);\n_c = ReApplyFormWrapper;\nvar ReApplyInput = styled(Input.TextArea).withConfig({\n  displayName: \"ReCommentListItem__ReApplyInput\",\n  componentId: \"sc-14mn7tx-1\"\n})([\"flex:7;\"]);\n_c2 = ReApplyInput;\nvar ButtonWrapper = styled.div.withConfig({\n  displayName: \"ReCommentListItem__ButtonWrapper\",\n  componentId: \"sc-14mn7tx-2\"\n})([\"line-height:30px;flex:1;.cancel-btn{cursor:pointer;margin-left:5px;}.submit-btn{cursor:pointer;color:#208fff;margin-left:10px;}.secret-btn{margin-left:10px;}\"]);\n_c3 = ButtonWrapper;\nvar CommentActivityWrapper = styled.div.withConfig({\n  displayName: \"ReCommentListItem__CommentActivityWrapper\",\n  componentId: \"sc-14mn7tx-3\"\n})([\"font-size:11px;padding:0 3px;cursor:pointer;\"]);\n_c4 = CommentActivityWrapper;\n\nvar ReCommentListItem = function ReCommentListItem(_ref) {\n  _s();\n\n  var reComment = _ref.reComment,\n      post = _ref.post,\n      me = _ref.me,\n      onDeleteComment = _ref.onDeleteComment;\n  // redux\n  var dispatch = useDispatch(); // local state\n\n  var _useState = useState(\"\"),\n      editReCommentText = _useState[0],\n      setEditReCommentText = _useState[1];\n\n  var _useToggle = useToggle(false),\n      _useToggle2 = _slicedToArray(_useToggle, 2),\n      isEditReComment = _useToggle2[0],\n      onToggleIsEditReComment = _useToggle2[1];\n\n  var _useState2 = useState(false),\n      isReEditSecret = _useState2[0],\n      setIsReEditSecret = _useState2[1];\n\n  var _useState3 = useState(null),\n      currentReComment = _useState3[0],\n      setCurrentReComment = _useState3[1];\n\n  var _useState4 = useState(reComment.likes.some(function (v, i) {\n    if (me && v.userId === me._id) {\n      return true;\n    }\n  }) ? true : false),\n      like = _useState4[0],\n      setLike = _useState4[1]; // event listener\n\n\n  var onChangeEditReCommentText = useCallback(function (e) {\n    setEditReCommentText(e.target.value);\n  }, []);\n  var onToggleIsReEditSecret = useCallback(function () {\n    setIsReEditSecret(!isReEditSecret);\n  }, [isReEditSecret]);\n  var onUpdateReComment = useCallback(function (reComment) {\n    if (editReCommentText === \"\") {\n      alert(\"내용을 입력해주세요.\");\n      return;\n    }\n\n    var updateConfirm = confirm(\"수정하시겠습니까?\");\n\n    if (updateConfirm) {\n      axios.patch(\"/api/comments\", {\n        commentId: reComment._id,\n        content: editReCommentText,\n        secretComment: isReEditSecret\n      }).then(function (res) {\n        onToggleIsEditReComment();\n        Router.push(\"/articles/\".concat(post.type, \"/\").concat(post._id));\n      })[\"catch\"](function (error) {\n        alert(\"댓글수정 실패\");\n      });\n    } else {\n      return;\n    }\n  }, [editReCommentText, isReEditSecret]);\n  var onToggleLike = useCallback(function () {\n    setLike(!like);\n\n    if (like) {\n      dispatch(unLikeCommentRequestAction({\n        user: me,\n        id: reComment.likes.find(function (v, i) {\n          if (v.userId === me._id) {\n            return true;\n          }\n        })._id,\n        type: \"comment\",\n        commentId: reComment._id\n      }));\n    } else {\n      dispatch(likeCommentRequestAction({\n        user: me,\n        id: reComment._id,\n        type: \"comment\"\n      }));\n    }\n  }, [like, me, reComment]);\n  var onCancelEdit = useCallback(function () {\n    setEditReCommentText(reComment.content);\n    setIsReEditSecret(reComment.secretComment);\n    onToggleIsEditReComment();\n  }, [reComment, isEditReComment]);\n  var onChangeCurrentReComment = useCallback(function (reComment) {\n    setCurrentReComment(reComment);\n  }, []); // hooks\n\n  useEffect(function () {\n    setEditReCommentText(reComment.content);\n    setIsReEditSecret(reComment.secretComment);\n  }, [reComment]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Comment, {\n      author: !reComment.isDelete && reComment.writer && post.writer && (reComment.writer._id === post.writer._id ? /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: \"#1a91fe\"\n        },\n        children: \"\\uAE00\\uC4F4\\uC774\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }, _this) : reComment.writer.nickname),\n      actions: me ? isEditReComment && currentReComment && currentReComment._id === reComment._id ? [/*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(ReApplyFormWrapper, {\n          children: [/*#__PURE__*/_jsxDEV(ReApplyInput, {\n            rows: 1,\n            onChange: onChangeEditReCommentText,\n            defaultValue: reComment.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 23\n          }, _this), /*#__PURE__*/_jsxDEV(ButtonWrapper, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"submit-btn\",\n              onClick: function onClick() {\n                onUpdateReComment(reComment);\n              },\n              children: \"\\uC218\\uC815\"\n            }, \"comment-list-reply-to-0\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 25\n            }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"cancel-btn\",\n              onClick: onCancelEdit,\n              children: \"\\uCDE8\\uC18C\"\n            }, \"comment-list-reply-to-1\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 25\n            }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"secret-btn\",\n              children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                onChange: onToggleIsReEditSecret,\n                style: {\n                  color: \"#999\"\n                },\n                defaultChecked: reComment.secretComment,\n                children: \"\\uBE44\\uBC00 \\uB313\\uAE00\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 27\n              }, _this)\n            }, \"comment-list-reply-to-2\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 25\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 23\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false)] : [/*#__PURE__*/_jsxDEV(CommentActivityWrapper, {\n        children: me && /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: onToggleLike,\n          style: {\n            marginRight: \"10px\"\n          },\n          children: [like ? /*#__PURE__*/_jsxDEV(LikeFilled, {\n            style: {\n              marginRight: \"3px\",\n              color: \"#1a91fe\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 27\n          }, _this) : /*#__PURE__*/_jsxDEV(LikeOutlined, {\n            style: {\n              marginRight: \"3px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 27\n          }, _this), reComment.likes.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 23\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 19\n      }, _this), /*#__PURE__*/_jsxDEV(CommentActivityWrapper, {\n        children: reComment.writer && me && me._id === reComment.writer._id && /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: function onClick() {\n            onDeleteComment(reComment._id);\n          },\n          children: \"\\uC0AD\\uC81C\"\n        }, \"comment-list-reply-to-0\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 23\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 19\n      }, _this), /*#__PURE__*/_jsxDEV(CommentActivityWrapper, {\n        children: reComment.writer && me._id === reComment.writer._id && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"|\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 23\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 19\n      }, _this), /*#__PURE__*/_jsxDEV(CommentActivityWrapper, {\n        children: reComment.writer && me._id === reComment.writer._id && /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: function onClick() {\n            onToggleIsEditReComment();\n            onChangeCurrentReComment(reComment);\n          },\n          children: \"\\uC218\\uC815\"\n        }, \"comment-list-reply-to-0\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 23\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 19\n      }, _this)] : [],\n      avatar: /*#__PURE__*/_jsxDEV(Popover, {\n        content: /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: function onClick(e) {\n            e.stopPropagation();\n          },\n          children: reComment.writer && reComment.writer.constructor == Object && /*#__PURE__*/_jsxDEV(ProfileModal, {\n            writer: reComment.writer\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 19\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 15\n        }, _this),\n        children: /*#__PURE__*/_jsxDEV(Avatar, {\n          onClick: function onClick(e) {\n            e.stopPropagation();\n          },\n          style: {\n            cursor: \"pointer\"\n          },\n          size: 28,\n          icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 21\n          }, _this),\n          src: reComment.writer && reComment.writer.avatarUrl && /*#__PURE__*/_jsxDEV(Image, {\n            width: 28,\n            height: 28,\n            src: \"\".concat(reComment.writer.avatarUrl)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 19\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 11\n      }, _this),\n      content: reComment.writer && reComment.writer.constructor == Object ? reComment.secretComment ? me && (reComment.writer && reComment.writer._id === me._id || post.comments.find(function (v, i) {\n        if (v._id === reComment.commentTo) {\n          return true;\n        }\n      }).writer._id === me._id) ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: reComment.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 19\n        }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: \"#999\",\n            fontSize: \"12px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(LockOutlined, {\n            style: {\n              margin: \"0 5px\",\n              color: \"#999\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 21\n          }, _this), \"\\uBE44\\uBC00 \\uB313\\uAE00\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 19\n        }, _this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(LockOutlined, {\n          style: {\n            margin: \"0 5px\",\n            color: \"#999\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 19\n        }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: \"#999\"\n          },\n          children: \"\\uBE44\\uBC00 \\uB313\\uAE00\\uC785\\uB2C8\\uB2E4.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 19\n        }, _this)]\n      }, void 0, true) : reComment.content : \"탈퇴한 회원입니다.\",\n      datetime: \"\".concat(new Date(reComment.createdAt).getMonth() + 1, \"/\").concat(new Date(reComment.createdAt).getDate(), \"  \").concat(new Date(reComment.createdAt).getHours(), \":\").concat(new Date(reComment.createdAt).getMinutes() < 10 ? \"0\" + new Date(reComment.createdAt).getMinutes() : new Date(reComment.createdAt).getMinutes(), \":\").concat(new Date(reComment.createdAt).getSeconds() < 10 ? \"0\" + new Date(reComment.createdAt).getSeconds() : new Date(reComment.createdAt).getSeconds())\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, _this)\n  }, reComment._id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(ReCommentListItem, \"bxNlyPDkVL6h9+wmBkRBOhCdmY4=\", false, function () {\n  return [useDispatch, useToggle];\n});\n\n_c5 = ReCommentListItem;\nexport default ReCommentListItem;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"ReApplyFormWrapper\");\n$RefreshReg$(_c2, \"ReApplyInput\");\n$RefreshReg$(_c3, \"ButtonWrapper\");\n$RefreshReg$(_c4, \"CommentActivityWrapper\");\n$RefreshReg$(_c5, \"ReCommentListItem\");","map":{"version":3,"sources":["/Users/jinho/Project/ProjectFrontend/Frontend/components/common/contents/ReCommentListItem.jsx"],"names":["React","useCallback","useState","useEffect","styled","Avatar","Popover","Comment","Input","Image","Checkbox","ProfileModal","UserOutlined","LockOutlined","LikeOutlined","LikeFilled","useDispatch","useToggle","SERVER_URL","likeCommentRequestAction","unLikeCommentRequestAction","Router","axios","ReApplyFormWrapper","div","ReApplyInput","TextArea","ButtonWrapper","CommentActivityWrapper","ReCommentListItem","reComment","post","me","onDeleteComment","dispatch","editReCommentText","setEditReCommentText","isEditReComment","onToggleIsEditReComment","isReEditSecret","setIsReEditSecret","currentReComment","setCurrentReComment","likes","some","v","i","userId","_id","like","setLike","onChangeEditReCommentText","e","target","value","onToggleIsReEditSecret","onUpdateReComment","alert","updateConfirm","confirm","patch","commentId","content","secretComment","then","res","push","type","error","onToggleLike","user","id","find","onCancelEdit","onChangeCurrentReComment","isDelete","writer","color","nickname","marginRight","length","stopPropagation","constructor","Object","cursor","avatarUrl","comments","commentTo","fontSize","margin","Date","createdAt","getMonth","getDate","getHours","getMinutes","getSeconds"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { Avatar, Popover, Comment, Input, Image, Checkbox } from \"antd\";\nimport ProfileModal from \"../../modal/ProfileModal\";\nimport {\n  UserOutlined,\n  LockOutlined,\n  LikeOutlined,\n  LikeFilled,\n} from \"@ant-design/icons\";\nimport { useDispatch } from \"react-redux\";\nimport useToggle from \"../../../hooks/useToggle\";\nimport { SERVER_URL } from \"../../../lib/constant/constant\";\nimport {\n  likeCommentRequestAction,\n  unLikeCommentRequestAction,\n} from \"../../../reducers/post\";\nimport Router from \"next/router\";\nimport axios from \"axios\";\n\n/**\n * @author 박진호\n * @version 1.0\n * @summary 포스트 대댓글 아이템 컴포넌트\n */\n\n// style\n\nconst ReApplyFormWrapper = styled.div`\n  width: 800px;\n  display: flex;\n  @media (max-width: 768px) {\n    width: 200px;\n    display: block;\n  }\n`;\n\nconst ReApplyInput = styled(Input.TextArea)`\n  flex: 7;\n`;\n\nconst ButtonWrapper = styled.div`\n  line-height: 30px;\n  flex: 1;\n  .cancel-btn {\n    cursor: pointer;\n    margin-left: 5px;\n  }\n  .submit-btn {\n    cursor: pointer;\n    color: #208fff;\n    margin-left: 10px;\n  }\n  .secret-btn {\n    margin-left: 10px;\n  }\n`;\n\nconst CommentActivityWrapper = styled.div`\n  font-size: 11px;\n  padding: 0 3px;\n  cursor: pointer;\n`;\n\nconst ReCommentListItem = ({ reComment, post, me, onDeleteComment }) => {\n  // redux\n\n  const dispatch = useDispatch();\n\n  // local state\n\n  const [editReCommentText, setEditReCommentText] = useState(\"\");\n  const [isEditReComment, onToggleIsEditReComment] = useToggle(false);\n  const [isReEditSecret, setIsReEditSecret] = useState(false);\n  const [currentReComment, setCurrentReComment] = useState(null);\n  const [like, setLike] = useState(\n    reComment.likes.some((v, i) => {\n      if (me && v.userId === me._id) {\n        return true;\n      }\n    })\n      ? true\n      : false,\n  );\n\n  // event listener\n\n  const onChangeEditReCommentText = useCallback((e) => {\n    setEditReCommentText(e.target.value);\n  }, []);\n\n  const onToggleIsReEditSecret = useCallback(() => {\n    setIsReEditSecret(!isReEditSecret);\n  }, [isReEditSecret]);\n\n  const onUpdateReComment = useCallback(\n    (reComment) => {\n      if (editReCommentText === \"\") {\n        alert(\"내용을 입력해주세요.\");\n        return;\n      }\n      let updateConfirm = confirm(\"수정하시겠습니까?\");\n      if (updateConfirm) {\n        axios\n          .patch(`/api/comments`, {\n            commentId: reComment._id,\n            content: editReCommentText,\n            secretComment: isReEditSecret,\n          })\n          .then((res) => {\n            onToggleIsEditReComment();\n            Router.push(`/articles/${post.type}/${post._id}`);\n          })\n          .catch((error) => {\n            alert(\"댓글수정 실패\");\n          });\n      } else {\n        return;\n      }\n    },\n    [editReCommentText, isReEditSecret],\n  );\n\n  const onToggleLike = useCallback(() => {\n    setLike(!like);\n    if (like) {\n      dispatch(\n        unLikeCommentRequestAction({\n          user: me,\n          id: reComment.likes.find((v, i) => {\n            if (v.userId === me._id) {\n              return true;\n            }\n          })._id,\n          type: \"comment\",\n          commentId: reComment._id,\n        }),\n      );\n    } else {\n      dispatch(\n        likeCommentRequestAction({\n          user: me,\n          id: reComment._id,\n          type: \"comment\",\n        }),\n      );\n    }\n  }, [like, me, reComment]);\n\n  const onCancelEdit = useCallback(() => {\n    setEditReCommentText(reComment.content);\n    setIsReEditSecret(reComment.secretComment);\n    onToggleIsEditReComment();\n  }, [reComment, isEditReComment]);\n\n  const onChangeCurrentReComment = useCallback((reComment) => {\n    setCurrentReComment(reComment);\n  }, []);\n\n  // hooks\n\n  useEffect(() => {\n    setEditReCommentText(reComment.content);\n    setIsReEditSecret(reComment.secretComment);\n  }, [reComment]);\n\n  return (\n    <div key={reComment._id}>\n      <Comment\n        author={\n          !reComment.isDelete &&\n          reComment.writer &&\n          post.writer &&\n          (reComment.writer._id === post.writer._id ? (\n            <span style={{ color: \"#1a91fe\" }}>글쓴이</span>\n          ) : (\n            reComment.writer.nickname\n          ))\n        }\n        actions={\n          me\n            ? isEditReComment &&\n              currentReComment &&\n              currentReComment._id === reComment._id\n              ? [\n                  <>\n                    <ReApplyFormWrapper>\n                      <ReApplyInput\n                        rows={1}\n                        onChange={onChangeEditReCommentText}\n                        defaultValue={reComment.content}\n                      />\n\n                      <ButtonWrapper>\n                        <span\n                          className=\"submit-btn\"\n                          key=\"comment-list-reply-to-0\"\n                          onClick={() => {\n                            onUpdateReComment(reComment);\n                          }}\n                        >\n                          수정\n                        </span>\n                        <span\n                          className=\"cancel-btn\"\n                          key=\"comment-list-reply-to-1\"\n                          onClick={onCancelEdit}\n                        >\n                          취소\n                        </span>\n                        <span\n                          className=\"secret-btn\"\n                          key=\"comment-list-reply-to-2\"\n                        >\n                          <Checkbox\n                            onChange={onToggleIsReEditSecret}\n                            style={{ color: \"#999\" }}\n                            defaultChecked={reComment.secretComment}\n                          >\n                            비밀 댓글\n                          </Checkbox>\n                        </span>\n                      </ButtonWrapper>\n                    </ReApplyFormWrapper>\n                  </>,\n                ]\n              : [\n                  <CommentActivityWrapper>\n                    {me && (\n                      <span\n                        onClick={onToggleLike}\n                        style={{ marginRight: \"10px\" }}\n                      >\n                        {like ? (\n                          <LikeFilled\n                            style={{ marginRight: \"3px\", color: \"#1a91fe\" }}\n                          />\n                        ) : (\n                          <LikeOutlined style={{ marginRight: \"3px\" }} />\n                        )}\n\n                        {reComment.likes.length}\n                      </span>\n                    )}\n                  </CommentActivityWrapper>,\n                  <CommentActivityWrapper>\n                    {reComment.writer && me && me._id === reComment.writer._id && (\n                      <span\n                        key=\"comment-list-reply-to-0\"\n                        onClick={() => {\n                          onDeleteComment(reComment._id);\n                        }}\n                      >\n                        삭제\n                      </span>\n                    )}\n                  </CommentActivityWrapper>,\n                  <CommentActivityWrapper>\n                    {reComment.writer && me._id === reComment.writer._id && (\n                      <span>|</span>\n                    )}\n                  </CommentActivityWrapper>,\n                  <CommentActivityWrapper>\n                    {reComment.writer && me._id === reComment.writer._id && (\n                      <span\n                        key=\"comment-list-reply-to-0\"\n                        onClick={() => {\n                          onToggleIsEditReComment();\n                          onChangeCurrentReComment(reComment);\n                        }}\n                      >\n                        수정\n                      </span>\n                    )}\n                  </CommentActivityWrapper>,\n                ]\n            : []\n        }\n        avatar={\n          <Popover\n            content={\n              <div\n                onClick={(e) => {\n                  e.stopPropagation();\n                }}\n              >\n                {reComment.writer && reComment.writer.constructor == Object && (\n                  <ProfileModal writer={reComment.writer}></ProfileModal>\n                )}\n              </div>\n            }\n          >\n            <Avatar\n              onClick={(e) => {\n                e.stopPropagation();\n              }}\n              style={{\n                cursor: \"pointer\",\n              }}\n              size={28}\n              icon={<UserOutlined />}\n              src={\n                reComment.writer &&\n                reComment.writer.avatarUrl && (\n                  <Image\n                    width={28}\n                    height={28}\n                    src={`${reComment.writer.avatarUrl}`}\n                  />\n                )\n              }\n            />\n          </Popover>\n        }\n        content={\n          reComment.writer && reComment.writer.constructor == Object ? (\n            reComment.secretComment ? (\n              me &&\n              ((reComment.writer && reComment.writer._id === me._id) ||\n                post.comments.find((v, i) => {\n                  if (v._id === reComment.commentTo) {\n                    return true;\n                  }\n                }).writer._id === me._id) ? (\n                <>\n                  <span>{reComment.content}</span>\n                  <span style={{ color: \"#999\", fontSize: \"12px\" }}>\n                    <LockOutlined style={{ margin: \"0 5px\", color: \"#999\" }} />\n                    비밀 댓글\n                  </span>\n                </>\n              ) : (\n                <>\n                  <LockOutlined style={{ margin: \"0 5px\", color: \"#999\" }} />\n                  <span style={{ color: \"#999\" }}>비밀 댓글입니다.</span>\n                </>\n              )\n            ) : (\n              reComment.content\n            )\n          ) : (\n            \"탈퇴한 회원입니다.\"\n          )\n        }\n        datetime={`${new Date(reComment.createdAt).getMonth() + 1}/${new Date(\n          reComment.createdAt,\n        ).getDate()}  ${new Date(reComment.createdAt).getHours()}:${\n          new Date(reComment.createdAt).getMinutes() < 10\n            ? \"0\" + new Date(reComment.createdAt).getMinutes()\n            : new Date(reComment.createdAt).getMinutes()\n        }:${\n          new Date(reComment.createdAt).getSeconds() < 10\n            ? \"0\" + new Date(reComment.createdAt).getSeconds()\n            : new Date(reComment.createdAt).getSeconds()\n        }`}\n      />\n    </div>\n  );\n};\n\nexport default ReCommentListItem;\n"]},"metadata":{},"sourceType":"module"}