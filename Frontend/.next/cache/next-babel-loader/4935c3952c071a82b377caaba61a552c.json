{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/jinho/Project/ProjectFrontend/components/mypage/MyActivityTemplate.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { Card, Radio } from \"antd\";\nimport List from \"../common/contents/List\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\";\nimport Link from \"next/link\";\nimport moment from \"moment\";\n/**\n * @author 박진호\n * @version 1.0\n * @summary 유저 활동 정보(게시글, 댓글, 스크랩) 컴포넌트\n */\n// style\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar MyActivityWrapper = styled.div.withConfig({\n  displayName: \"MyActivityTemplate__MyActivityWrapper\",\n  componentId: \"sc-7cup97-0\"\n})([\"display:flex;.activity_type{flex:1;padding:20px;.ant-radio-group{.ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled):first-child{border-color:#4f528a;}.ant-radio-button-wrapper{width:200px;text-align:center;border-radius:0px;}span{color:#111;}}}.myActivity{flex:4;padding:20px;.ant-tabs-tab-btn{color:#111;}.ant-tabs-ink-bar{background:#4f528a;}}@media (max-width:768px){display:block;}\"]);\n_c = MyActivityWrapper;\nvar MyCommentWrapper = styled.div.withConfig({\n  displayName: \"MyActivityTemplate__MyCommentWrapper\",\n  componentId: \"sc-7cup97-1\"\n})([\"margin:20px 0;padding-bottom:5px;border-bottom:1px solid #ddd;\"]);\n_c2 = MyCommentWrapper;\n\nvar MyActivityTemplate = function MyActivityTemplate() {\n  _s();\n\n  // redux\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      me = _useSelector.me; // local state\n\n\n  var _useState = useState(\"study\"),\n      currentType = _useState[0],\n      setCurrentType = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(null),\n      contents = _useState3[0],\n      setContents = _useState3[1];\n\n  var _useState4 = useState(null),\n      posts = _useState4[0],\n      setPosts = _useState4[1];\n\n  var _useState5 = useState({\n    key: \"post\",\n    tab: \"게시글\"\n  }),\n      currTab = _useState5[0],\n      setCurrTab = _useState5[1]; // event listener\n\n\n  var onClickTypeBtn = useCallback(function (e) {\n    setContents(null);\n    setPosts(null);\n    setCurrentType(e.target.value);\n  }, []);\n\n  var _onTabChange = function onTabChange(key, type) {\n    setContents(null);\n    setPosts(null);\n    setCurrTab(_defineProperty({}, type, key));\n  }; // helper variable\n\n\n  var tabListTitle = [{\n    key: \"post\",\n    tab: \"게시글\"\n  }, {\n    key: \"comments\",\n    tab: \"댓글\"\n  }, {\n    key: \"scraps\",\n    tab: \"스크랩\"\n  }]; // hooks\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!me) {\n              _context.next = 5;\n              break;\n            }\n\n            setLoading(true);\n            _context.next = 4;\n            return axios.get(\"/api/users/\".concat(me._id, \"?type=\").concat(currentType, \"&sort=\").concat(currTab.key)).then(function (res) {\n              setContents(res.data.activities);\n\n              if (res.data.posts) {\n                setPosts(res.data.posts);\n              }\n            })[\"catch\"](function (err) {\n              console.log(err);\n            });\n\n          case 4:\n            setLoading(false);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), [currentType, currTab, me]);\n  if (!contents) return null;\n  if (loading) return null;\n  return /*#__PURE__*/_jsxDEV(MyActivityWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"activity_type\",\n      children: /*#__PURE__*/_jsxDEV(Radio.Group, {\n        onChange: onClickTypeBtn,\n        defaultValue: currentType,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Radio.Button, {\n            value: \"study\",\n            onChange: onClickTypeBtn,\n            children: \"\\uC2A4\\uD130\\uB514\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Radio.Button, {\n            value: \"project\",\n            onChange: onClickTypeBtn,\n            children: \"\\uD504\\uB85C\\uC81D\\uD2B8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Radio.Button, {\n            value: \"forum\",\n            onChange: onClickTypeBtn,\n            children: \"\\uD3EC\\uB7FC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"myActivity\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        style: {\n          width: \"100%\"\n        },\n        tabList: tabListTitle,\n        activeTabKey: currTab.key,\n        onTabChange: function onTabChange(key) {\n          _onTabChange(key, \"key\");\n        },\n        children: [currTab.key === \"post\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            overflow: \"auto\",\n            height: \"59vh\"\n          },\n          children: /*#__PURE__*/_jsxDEV(List, {\n            data: contents,\n            type: currentType\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, _this), currTab.key === \"comments\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            overflow: \"auto\",\n            height: \"59vh\"\n          },\n          children: contents.map(function (v, i) {\n            var flag = false;\n            var post = null;\n            posts.forEach(function (s, j) {\n              if (v.postId === s._id) {\n                flag = true;\n                post = s;\n              }\n            });\n\n            if (flag) {\n              return /*#__PURE__*/_jsxDEV(MyCommentWrapper, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontSize: \"16px\",\n                      fontWeight: \"500\"\n                    },\n                    children: v.content\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 189,\n                    columnNumber: 25\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(Link, {\n                    href: \"articles/\".concat(post.type, \"/\").concat(post._id),\n                    children: /*#__PURE__*/_jsxDEV(\"a\", {\n                      children: post.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 27\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 25\n                  }, _this), \" \", \"\\uAE00\\uC5D0 \\uB0A8\\uAE34 \\uB313\\uAE00\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      color: \"#999\",\n                      fontSize: \"10px\"\n                    },\n                    children: moment(v.createdAt).format(\"MM/DD HH:mm\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 25\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 23\n                }, _this)]\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 21\n              }, _this);\n            }\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, _this), currTab.key === \"scraps\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            overflow: \"auto\",\n            height: \"59vh\"\n          },\n          children: /*#__PURE__*/_jsxDEV(List, {\n            data: posts,\n            type: currentType\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(MyActivityTemplate, \"alUHIQUsopUesEYXgKyS5Tr0CT4=\", false, function () {\n  return [useSelector];\n});\n\n_c3 = MyActivityTemplate;\nexport default MyActivityTemplate;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"MyActivityWrapper\");\n$RefreshReg$(_c2, \"MyCommentWrapper\");\n$RefreshReg$(_c3, \"MyActivityTemplate\");","map":{"version":3,"sources":["/Users/jinho/Project/ProjectFrontend/components/mypage/MyActivityTemplate.jsx"],"names":["React","useState","useEffect","useCallback","Card","Radio","List","styled","axios","useSelector","Link","moment","MyActivityWrapper","div","MyCommentWrapper","MyActivityTemplate","state","user","me","currentType","setCurrentType","loading","setLoading","contents","setContents","posts","setPosts","key","tab","currTab","setCurrTab","onClickTypeBtn","e","target","value","onTabChange","type","tabListTitle","get","_id","then","res","data","activities","err","console","log","width","overflow","height","map","v","i","flag","post","forEach","s","j","postId","fontSize","fontWeight","content","title","color","createdAt","format"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { Card, Radio } from \"antd\";\nimport List from \"../common/contents/List\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\";\nimport Link from \"next/link\";\nimport moment from \"moment\";\n\n/**\n * @author 박진호\n * @version 1.0\n * @summary 유저 활동 정보(게시글, 댓글, 스크랩) 컴포넌트\n */\n\n// style\n\nconst MyActivityWrapper = styled.div`\n  display: flex;\n  .activity_type {\n    flex: 1;\n    padding: 20px;\n    .ant-radio-group {\n      .ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled):first-child {\n        border-color: #4f528a;\n      }\n      .ant-radio-button-wrapper {\n        width: 200px;\n        text-align: center;\n        border-radius: 0px;\n      }\n      span {\n        color: #111;\n      }\n    }\n  }\n  .myActivity {\n    flex: 4;\n    padding: 20px;\n    .ant-tabs-tab-btn {\n      color: #111;\n    }\n    .ant-tabs-ink-bar {\n      background: #4f528a;\n    }\n  }\n  @media (max-width: 768px) {\n    display: block;\n  }\n`;\n\nconst MyCommentWrapper = styled.div`\n  margin: 20px 0;\n  padding-bottom: 5px;\n  border-bottom: 1px solid #ddd;\n`;\n\nconst MyActivityTemplate = () => {\n  // redux\n\n  const { me } = useSelector((state) => state.user);\n\n  // local state\n\n  const [currentType, setCurrentType] = useState(\"study\");\n  const [loading, setLoading] = useState(false);\n  const [contents, setContents] = useState(null);\n  const [posts, setPosts] = useState(null);\n  const [currTab, setCurrTab] = useState({\n    key: \"post\",\n    tab: \"게시글\",\n  });\n\n  // event listener\n\n  const onClickTypeBtn = useCallback((e) => {\n    setContents(null);\n    setPosts(null);\n    setCurrentType(e.target.value);\n  }, []);\n\n  const onTabChange = (key, type) => {\n    setContents(null);\n    setPosts(null);\n    setCurrTab({ [type]: key });\n  };\n\n  // helper variable\n\n  const tabListTitle = [\n    {\n      key: \"post\",\n      tab: \"게시글\",\n    },\n    {\n      key: \"comments\",\n      tab: \"댓글\",\n    },\n    {\n      key: \"scraps\",\n      tab: \"스크랩\",\n    },\n  ];\n\n  // hooks\n\n  useEffect(async () => {\n    if (me) {\n      setLoading(true);\n      await axios\n        .get(`/api/users/${me._id}?type=${currentType}&sort=${currTab.key}`)\n        .then((res) => {\n          setContents(res.data.activities);\n          if (res.data.posts) {\n            setPosts(res.data.posts);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n\n      setLoading(false);\n    }\n  }, [currentType, currTab, me]);\n\n  if (!contents) return null;\n  if (loading) return null;\n\n  return (\n    <MyActivityWrapper>\n      <div className=\"activity_type\">\n        <Radio.Group onChange={onClickTypeBtn} defaultValue={currentType}>\n          <div>\n            <Radio.Button value=\"study\" onChange={onClickTypeBtn}>\n              스터디\n            </Radio.Button>\n          </div>\n          <div>\n            <Radio.Button value=\"project\" onChange={onClickTypeBtn}>\n              프로젝트\n            </Radio.Button>\n          </div>\n          <div>\n            <Radio.Button value=\"forum\" onChange={onClickTypeBtn}>\n              포럼\n            </Radio.Button>\n          </div>\n        </Radio.Group>\n      </div>\n      <div className=\"myActivity\">\n        <Card\n          style={{ width: \"100%\" }}\n          tabList={tabListTitle}\n          activeTabKey={currTab.key}\n          onTabChange={(key) => {\n            onTabChange(key, \"key\");\n          }}\n        >\n          {currTab.key === \"post\" && (\n            <div\n              style={{\n                overflow: \"auto\",\n                height: \"59vh\",\n              }}\n            >\n              <List data={contents} type={currentType} />\n            </div>\n          )}\n          {currTab.key === \"comments\" && (\n            <div\n              style={{\n                overflow: \"auto\",\n                height: \"59vh\",\n              }}\n            >\n              {contents.map((v, i) => {\n                let flag = false;\n                let post = null;\n                posts.forEach((s, j) => {\n                  if (v.postId === s._id) {\n                    flag = true;\n                    post = s;\n                  }\n                });\n                if (flag) {\n                  return (\n                    <MyCommentWrapper key={i}>\n                      <div>\n                        <span style={{ fontSize: \"16px\", fontWeight: \"500\" }}>\n                          {v.content}\n                        </span>\n                      </div>\n                      <div>\n                        <Link href={`articles/${post.type}/${post._id}`}>\n                          <a>{post.title}</a>\n                        </Link>{\" \"}\n                        글에 남긴 댓글\n                      </div>\n                      <div>\n                        <span style={{ color: \"#999\", fontSize: \"10px\" }}>\n                          {moment(v.createdAt).format(\"MM/DD HH:mm\")}\n                        </span>\n                      </div>\n                    </MyCommentWrapper>\n                  );\n                }\n              })}\n            </div>\n          )}\n          {currTab.key === \"scraps\" && (\n            <div\n              style={{\n                overflow: \"auto\",\n                height: \"59vh\",\n              }}\n            >\n              <List data={posts} type={currentType} />\n            </div>\n          )}\n        </Card>\n      </div>\n    </MyActivityWrapper>\n  );\n};\n\nexport default MyActivityTemplate;\n"]},"metadata":{},"sourceType":"module"}