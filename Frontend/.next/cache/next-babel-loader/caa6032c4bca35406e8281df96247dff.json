{"ast":null,"code":"var _jsxFileName = \"/Users/jinho/Project/ProjectFrontend/components/mypage/EditProfile.jsx\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport EditProfileForm from \"./EditProfileForm\";\nimport SkillFilterForm from \"../common/contents/SkillFilterForm\";\nimport { Button, Card } from \"antd\";\nimport { useSelector } from \"react-redux\";\nimport { SERVER_URL } from \"../../lib/constant/constant\";\nimport shortid from \"shortid\";\nimport { message } from \"antd\";\nimport axios from \"axios\";\nimport FormData from \"form-data\";\n/**\n * @author 박진호\n * @version 1.1\n * @summary 프로필 수정 폼 + 기술 스택 수정 폼 컨테이너 컴포넌트\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProfileReviseFormWrapper = styled.div.withConfig({\n  displayName: \"EditProfile__ProfileReviseFormWrapper\",\n  componentId: \"sc-2rim2x-0\"\n})([\"display:flex;padding:2rem 0;.edit-profile-form{flex:1;padding:20px;}.skill-filter-form{flex:2;padding:20px;}@media (max-width:900px){flex-direction:column;}\"]);\n\nconst EditProfile = () => {\n  // redux\n  const {\n    me\n  } = useSelector(state => state.user);\n  const {\n    skill\n  } = useSelector(state => state.skill); // local state\n\n  const {\n    0: nickname,\n    1: setNickname\n  } = useState(me && me.nickname);\n  const {\n    0: githubId,\n    1: setGithubId\n  } = useState(\"\");\n  const {\n    0: gitSecret,\n    1: setGitSecret\n  } = useState(false);\n  const {\n    0: profileImage,\n    1: setProfileImage\n  } = useState(null);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false); // event listener\n\n  const onChangeNickname = useCallback(e => {\n    setNickname(e.target.value);\n  }, []);\n  const onChangeGithubId = useCallback(e => {\n    setGithubId(e.target.value);\n  }, []);\n  const onToggleGitSecret = useCallback(() => {\n    setGitSecret(!gitSecret);\n  }, [gitSecret]);\n  const onChangeProfileImage = useCallback(e => {\n    setProfileImage(e);\n  }, []);\n  const onDeleteProfileImage = useCallback(e => {\n    setProfileImage(null);\n  }, []);\n  const onSubmit = useCallback(() => {\n    setLoading(true);\n    const config = {\n      headers: {\n        Accept: \"application/json\",\n        enctype: \"multipart/form-data\"\n      }\n    };\n    const formData = new FormData();\n    formData.append(\"nickname\", nickname);\n    formData.append(\"githubUrl\", githubId);\n    formData.append(\"techStack\", JSON.stringify(skill));\n    formData.append(\"secretGithub\", gitSecret);\n    formData.append(\"avatar\", profileImage);\n    axios.patch(`/api/users`, formData, config).then(res => {\n      submitDoneMessage();\n    }).catch(err => {\n      console.log(err);\n    });\n    setLoading(false);\n  }, [skill, nickname, githubId, gitSecret, profileImage]); // helper method\n\n  const submitDoneMessage = () => {\n    message.success({\n      content: \"저장 완료!\",\n      className: \"custom-class\",\n      style: {\n        marginTop: \"5vh\"\n      }\n    });\n  }; // hooks\n\n\n  useEffect(() => {\n    setProfileImage({\n      uid: shortid.generate(),\n      url: `${SERVER_URL}/${me.avatarUrl}`,\n      thumbUrl: `${SERVER_URL}/${me.avatarUrl}`,\n      status: \"done\"\n    });\n    setNickname(me.nickname);\n    setGithubId(me.githubId);\n  }, [me]);\n  useEffect(() => {\n    if (me) {\n      setGitSecret(me.secretGithub);\n      setGithubId(me.githubUrl);\n    }\n  }, [me]);\n  if (!me) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ProfileReviseFormWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"edit-profile-form\",\n        children: /*#__PURE__*/_jsxDEV(EditProfileForm, {\n          onChangeProfileImage: onChangeProfileImage,\n          onDeleteProfileImage: onDeleteProfileImage,\n          onChangeNickname: onChangeNickname,\n          onChangeGithubId: onChangeGithubId,\n          onToggleGitSecret: onToggleGitSecret,\n          gitSecret: gitSecret\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"skill-filter-form\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          title: \"\\uAD00\\uC2EC \\uAE30\\uC220 \\uC218\\uC815\",\n          bordered: true,\n          children: [\" \", /*#__PURE__*/_jsxDEV(SkillFilterForm, {\n            type: \"mypage\",\n            values: me.techStack,\n            isEdit: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: onSubmit,\n        loading: loading,\n        style: {\n          background: \"#313355\",\n          color: \"#fff\",\n          border: \"1px solid #313355\"\n        },\n        children: \"\\uC800\\uC7A5\\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\nexport default EditProfile;","map":{"version":3,"sources":["/Users/jinho/Project/ProjectFrontend/components/mypage/EditProfile.jsx"],"names":["React","useState","useCallback","useEffect","styled","EditProfileForm","SkillFilterForm","Button","Card","useSelector","SERVER_URL","shortid","message","axios","FormData","ProfileReviseFormWrapper","div","EditProfile","me","state","user","skill","nickname","setNickname","githubId","setGithubId","gitSecret","setGitSecret","profileImage","setProfileImage","loading","setLoading","onChangeNickname","e","target","value","onChangeGithubId","onToggleGitSecret","onChangeProfileImage","onDeleteProfileImage","onSubmit","config","headers","Accept","enctype","formData","append","JSON","stringify","patch","then","res","submitDoneMessage","catch","err","console","log","success","content","className","style","marginTop","uid","generate","url","avatarUrl","thumbUrl","status","secretGithub","githubUrl","techStack","textAlign","background","color","border"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport EditProfileForm from \"./EditProfileForm\";\nimport SkillFilterForm from \"../common/contents/SkillFilterForm\";\nimport { Button, Card } from \"antd\";\nimport { useSelector } from \"react-redux\";\nimport { SERVER_URL } from \"../../lib/constant/constant\";\nimport shortid from \"shortid\";\nimport { message } from \"antd\";\nimport axios from \"axios\";\nimport FormData from \"form-data\";\n\n/**\n * @author 박진호\n * @version 1.1\n * @summary 프로필 수정 폼 + 기술 스택 수정 폼 컨테이너 컴포넌트\n */\n\nconst ProfileReviseFormWrapper = styled.div`\n  display: flex;\n  padding: 2rem 0;\n  .edit-profile-form {\n    flex: 1;\n    padding: 20px;\n  }\n  .skill-filter-form {\n    flex: 2;\n    padding: 20px;\n  }\n  @media (max-width: 900px) {\n    flex-direction: column;\n  }\n`;\n\nconst EditProfile = () => {\n  // redux\n\n  const { me } = useSelector((state) => state.user);\n  const { skill } = useSelector((state) => state.skill);\n\n  // local state\n\n  const [nickname, setNickname] = useState(me && me.nickname);\n  const [githubId, setGithubId] = useState(\"\");\n  const [gitSecret, setGitSecret] = useState(false);\n  const [profileImage, setProfileImage] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  // event listener\n\n  const onChangeNickname = useCallback((e) => {\n    setNickname(e.target.value);\n  }, []);\n  const onChangeGithubId = useCallback((e) => {\n    setGithubId(e.target.value);\n  }, []);\n  const onToggleGitSecret = useCallback(() => {\n    setGitSecret(!gitSecret);\n  }, [gitSecret]);\n\n  const onChangeProfileImage = useCallback((e) => {\n    setProfileImage(e);\n  }, []);\n\n  const onDeleteProfileImage = useCallback((e) => {\n    setProfileImage(null);\n  }, []);\n\n  const onSubmit = useCallback(() => {\n    setLoading(true);\n    const config = {\n      headers: {\n        Accept: \"application/json\",\n        enctype: \"multipart/form-data\",\n      },\n    };\n    const formData = new FormData();\n    formData.append(\"nickname\", nickname);\n    formData.append(\"githubUrl\", githubId);\n    formData.append(\"techStack\", JSON.stringify(skill));\n    formData.append(\"secretGithub\", gitSecret);\n    formData.append(\"avatar\", profileImage);\n\n    axios\n      .patch(`/api/users`, formData, config)\n      .then((res) => {\n        submitDoneMessage();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    setLoading(false);\n  }, [skill, nickname, githubId, gitSecret, profileImage]);\n\n  // helper method\n\n  const submitDoneMessage = () => {\n    message.success({\n      content: \"저장 완료!\",\n      className: \"custom-class\",\n      style: {\n        marginTop: \"5vh\",\n      },\n    });\n  };\n\n  // hooks\n\n  useEffect(() => {\n    setProfileImage({\n      uid: shortid.generate(),\n      url: `${SERVER_URL}/${me.avatarUrl}`,\n      thumbUrl: `${SERVER_URL}/${me.avatarUrl}`,\n      status: \"done\",\n    });\n    setNickname(me.nickname);\n    setGithubId(me.githubId);\n  }, [me]);\n\n  useEffect(() => {\n    if (me) {\n      setGitSecret(me.secretGithub);\n      setGithubId(me.githubUrl);\n    }\n  }, [me]);\n\n  if (!me) return null;\n\n  return (\n    <>\n      <ProfileReviseFormWrapper>\n        <div className=\"edit-profile-form\">\n          <EditProfileForm\n            onChangeProfileImage={onChangeProfileImage}\n            onDeleteProfileImage={onDeleteProfileImage}\n            onChangeNickname={onChangeNickname}\n            onChangeGithubId={onChangeGithubId}\n            onToggleGitSecret={onToggleGitSecret}\n            gitSecret={gitSecret}\n          />\n        </div>\n        <div className=\"skill-filter-form\">\n          <Card title=\"관심 기술 수정\" bordered={true}>\n            {\" \"}\n            <SkillFilterForm\n              type=\"mypage\"\n              values={me.techStack}\n              isEdit={true}\n            />\n          </Card>\n        </div>\n      </ProfileReviseFormWrapper>\n      <div\n        style={{\n          textAlign: \"center\",\n        }}\n      >\n        <Button\n          type=\"primary\"\n          onClick={onSubmit}\n          loading={loading}\n          style={{\n            background: \"#313355\",\n            color: \"#fff\",\n            border: \"1px solid #313355\",\n          }}\n        >\n          저장하기\n        </Button>\n      </div>\n    </>\n  );\n};\n\nexport default EditProfile;\n"]},"metadata":{},"sourceType":"module"}