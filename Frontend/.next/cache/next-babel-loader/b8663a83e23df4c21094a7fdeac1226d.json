{"ast":null,"code":"var _jsxFileName = \"/Users/jinho/Project/ProjectFrontend/Frontend/components/common/contents/PostViewerHeader.jsx\";\nimport React, { useCallback, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { MessageOutlined, LikeOutlined, EyeOutlined, UserOutlined, TagsOutlined, LikeFilled, TagsFilled } from \"@ant-design/icons\";\nimport { Avatar, Popover, Button, Image } from \"antd\";\nimport ProfileModal from \"../../modal/ProfileModal\";\nimport { postScrapRequestAction, deletePostRequestAction, likePostRequestAction, unLikePostRequestAction, postUnScrapRequestAction } from \"../../../reducers/post\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { SERVER_URL } from \"../../../lib/constant/constant\";\nimport Router from \"next/router\";\nimport { message } from \"antd\";\n/**\n * @author 박진호\n * @version 1.0\n * @summary 포스트 뷰어 헤더 컴포넌트\n */\n// style\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PostViewerHeaderWrapper = styled.div.withConfig({\n  displayName: \"PostViewerHeader__PostViewerHeaderWrapper\",\n  componentId: \"sc-1jcf24q-0\"\n})([\"justify-content:space-between;font-size:18px;font-weight:300;background:#fff;padding:20px 40px;.user-profile{flex:1;padding:5px 0;.user-nickname{margin:0 5px;}}.post-desc{font-size:12px;color:#888;flex:1;text-align:left;line-height:30px;display:flex;.post-summary{}.post-btns{text-align:right;flex:1;}.create-date{margin-right:10px;}.create-time{margin-right:10px;}.post-views,.post-comments,.post-forum-likes,.post-forum-scraps{margin:0 7px;}.scrap-btn,.delete-btn,.like-btn,.revise-btn{padding:5px;margin:0 5px;border:none;text-align:center;}}\"]);\n\nconst PostViewerHeader = ({\n  post,\n  contentType\n}) => {\n  // redux\n  const dispatch = useDispatch();\n  const {\n    me\n  } = useSelector(state => state.user); // local state\n\n  const {\n    0: like,\n    1: setLike\n  } = useState(post.likes.some((v, i) => {\n    if (me && v.userId === me._id) {\n      return true;\n    }\n  }) ? true : false);\n  const {\n    0: isScraped,\n    1: setIsScraped\n  } = useState(post.scraps.some((v, i) => {\n    if (me && v.userId === me._id) {\n      return true;\n    }\n  }) ? true : false); // helper method\n\n  const scrapDoneMessage = () => {\n    message.success({\n      content: \"스크랩 완료!\",\n      className: \"custom-class\",\n      style: {\n        marginTop: \"5vh\"\n      }\n    });\n  };\n\n  const unScrapDoneMessage = () => {\n    message.success({\n      content: \"스크랩 취소!\",\n      className: \"custom-class\",\n      style: {\n        marginTop: \"5vh\"\n      }\n    });\n  }; // event listener\n\n\n  const onToggleLike = useCallback(() => {\n    setLike(!like);\n\n    if (like) {\n      dispatch(unLikePostRequestAction({\n        user: me,\n        id: post.likes.find((v, i) => {\n          if (v.userId === me._id) {\n            return true;\n          }\n        })._id,\n        type: \"forum\",\n        postId: post._id\n      }));\n    } else {\n      dispatch(likePostRequestAction({\n        user: me,\n        id: post._id,\n        type: \"forum\"\n      }));\n    }\n  }, [like, me, post]);\n  const onScrap = useCallback(() => {\n    setIsScraped(!isScraped);\n\n    if (isScraped) {\n      unScrapDoneMessage();\n      dispatch(postUnScrapRequestAction({\n        postId: post._id,\n        type: contentType,\n        id: post.scraps.find((v, i) => {\n          if (v.userId === me._id) {\n            return true;\n          }\n        })._id,\n        user: me\n      }));\n    } else {\n      scrapDoneMessage();\n      dispatch(postScrapRequestAction({\n        id: post._id,\n        type: contentType,\n        user: me\n      }));\n    }\n  }, [post, isScraped, me]);\n  const onPostDelete = useCallback(deleteType => {\n    let confirmDelete = deleteType === \"recruitDone\" ? confirm(\"게시글이 삭제됩니다. 정말로 모집완료 처리하시겠습니까?\") : confirm(\"정말로 삭제하시겠습니까?\");\n\n    if (confirmDelete) {\n      dispatch(deletePostRequestAction(post._id));\n      Router.push(`/articles/${contentType}`);\n    } else {\n      return;\n    }\n  }, [post]);\n  const onPostRevise = useCallback(() => {\n    let confirmRevise = confirm(\"글을 수정하시겠습니까?\");\n\n    if (confirmRevise) {\n      Router.push(`/articles/edit/${post._id}`);\n    } else {}\n  }, [post]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(PostViewerHeaderWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-profile\",\n        children: [/*#__PURE__*/_jsxDEV(Popover, {\n          content: /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: e => {\n              e.stopPropagation();\n            },\n            children: post.writer && /*#__PURE__*/_jsxDEV(ProfileModal, {\n              writer: post.writer && post.writer\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this),\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            onClick: e => {\n              e.stopPropagation();\n            },\n            style: {\n              cursor: \"pointer\"\n            },\n            size: 32,\n            icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 21\n            }, this),\n            src: post.writer && post.writer.avatarUrl && /*#__PURE__*/_jsxDEV(Image, {\n              src: `${post.writer.avatarUrl}`,\n              width: 32,\n              height: 32\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"user-nickname\",\n          children: post.writer ? post.writer.nickname : \"탈퇴한 회원\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-desc\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post-header-summary\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"create-date\",\n            children: `${new Date(post.createdAt).getFullYear()}.${new Date(post.createdAt).getMonth() + 1}.${new Date(post.createdAt).getDate()}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"create-time\",\n            children: `${new Date(post.createdAt).getHours()}:${new Date(post.createdAt).getMinutes() < 10 ? \"0\" + new Date(post.createdAt).getMinutes() : new Date(post.createdAt).getMinutes()}:${new Date(post.createdAt).getSeconds() < 10 ? \"0\" + new Date(post.createdAt).getSeconds() : new Date(post.createdAt).getSeconds()}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(EyeOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"post-views\",\n            children: post.views\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MessageOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"post-comments\",\n            children: post.comments.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [contentType === \"forum\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(LikeOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"post-forum-likes\",\n                children: post.likes.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(TagsOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"post-forum-scraps\",\n              children: post.scraps.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post-btns\",\n          children: [me && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              className: \"scrap-btn\",\n              onClick: onScrap,\n              children: isScraped ? /*#__PURE__*/_jsxDEV(TagsFilled, {\n                style: {\n                  marginRight: \"3px\",\n                  color: \"#1a91fe\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(TagsOutlined, {\n                style: {\n                  marginRight: \"3px\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 17\n            }, this)\n          }, void 0, false), me && contentType == \"forum\" && /*#__PURE__*/_jsxDEV(Button, {\n            type: \"ghost\",\n            className: \"like-btn\",\n            onClick: () => {\n              onToggleLike();\n            },\n            children: like ? /*#__PURE__*/_jsxDEV(LikeFilled, {\n              style: {\n                marginRight: \"3px\",\n                color: \"#1a91fe\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(LikeOutlined, {\n              style: {\n                marginRight: \"3px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, this), me && (contentType === \"study\" || contentType === \"project\") && post.writer && me._id === post.writer._id && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              type: \"ghost\",\n              className: \"revise-btn\",\n              onClick: () => {\n                onPostDelete(\"recruitDone\");\n              },\n              children: \"\\uBAA8\\uC9D1\\uC644\\uB8CC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"/\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true), me && post.writer && me._id === post.writer._id && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"ghost\",\n              className: \"revise-btn\",\n              onClick: () => {\n                onPostRevise();\n              },\n              children: \"\\uC218\\uC815\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 17\n            }, this)\n          }, void 0, false), me && post.writer && me._id === post.writer._id && contentType === \"forum\" && /*#__PURE__*/_jsxDEV(Button, {\n            type: \"ghost\",\n            style: {\n              color: \"tomato\"\n            },\n            className: \"delete-btn\",\n            onClick: () => {\n              onPostDelete(\"deletePost\");\n            },\n            children: \"\\uC0AD\\uC81C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\nexport default PostViewerHeader;","map":{"version":3,"sources":["/Users/jinho/Project/ProjectFrontend/Frontend/components/common/contents/PostViewerHeader.jsx"],"names":["React","useCallback","useState","styled","MessageOutlined","LikeOutlined","EyeOutlined","UserOutlined","TagsOutlined","LikeFilled","TagsFilled","Avatar","Popover","Button","Image","ProfileModal","postScrapRequestAction","deletePostRequestAction","likePostRequestAction","unLikePostRequestAction","postUnScrapRequestAction","useDispatch","useSelector","SERVER_URL","Router","message","PostViewerHeaderWrapper","div","PostViewerHeader","post","contentType","dispatch","me","state","user","like","setLike","likes","some","v","i","userId","_id","isScraped","setIsScraped","scraps","scrapDoneMessage","success","content","className","style","marginTop","unScrapDoneMessage","onToggleLike","id","find","type","postId","onScrap","onPostDelete","deleteType","confirmDelete","confirm","push","onPostRevise","confirmRevise","e","stopPropagation","writer","cursor","avatarUrl","nickname","Date","createdAt","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","views","comments","length","marginRight","color"],"mappings":"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","sourcesContent":["import React, { useCallback, useState } from \"react\";\nimport styled from \"styled-components\";\nimport {\n  MessageOutlined,\n  LikeOutlined,\n  EyeOutlined,\n  UserOutlined,\n  TagsOutlined,\n  LikeFilled,\n  TagsFilled,\n} from \"@ant-design/icons\";\nimport { Avatar, Popover, Button, Image } from \"antd\";\nimport ProfileModal from \"../../modal/ProfileModal\";\nimport {\n  postScrapRequestAction,\n  deletePostRequestAction,\n  likePostRequestAction,\n  unLikePostRequestAction,\n  postUnScrapRequestAction,\n} from \"../../../reducers/post\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { SERVER_URL } from \"../../../lib/constant/constant\";\nimport Router from \"next/router\";\nimport { message } from \"antd\";\n\n/**\n * @author 박진호\n * @version 1.0\n * @summary 포스트 뷰어 헤더 컴포넌트\n */\n\n// style\n\nconst PostViewerHeaderWrapper = styled.div`\n  justify-content: space-between;\n  font-size: 18px;\n  font-weight: 300;\n  background: #fff;\n  padding: 20px 40px;\n\n  .user-profile {\n    flex: 1;\n    padding: 5px 0;\n    .user-nickname {\n      margin: 0 5px;\n    }\n  }\n  .post-desc {\n    font-size: 12px;\n    color: #888;\n    flex: 1;\n    text-align: left;\n\n    line-height: 30px;\n    display: flex;\n    .post-summary {\n    }\n    .post-btns {\n      text-align: right;\n\n      flex: 1;\n    }\n    .create-date {\n      margin-right: 10px;\n    }\n    .create-time {\n      margin-right: 10px;\n    }\n    .post-views,\n    .post-comments,\n    .post-forum-likes,\n    .post-forum-scraps {\n      margin: 0 7px;\n    }\n    .scrap-btn,\n    .delete-btn,\n    .like-btn,\n    .revise-btn {\n      padding: 5px;\n      margin: 0 5px;\n      border: none;\n      text-align: center;\n    }\n  }\n`;\n\nconst PostViewerHeader = ({ post, contentType }) => {\n  // redux\n\n  const dispatch = useDispatch();\n  const { me } = useSelector((state) => state.user);\n\n  // local state\n\n  const [like, setLike] = useState(\n    post.likes.some((v, i) => {\n      if (me && v.userId === me._id) {\n        return true;\n      }\n    })\n      ? true\n      : false,\n  );\n  const [isScraped, setIsScraped] = useState(\n    post.scraps.some((v, i) => {\n      if (me && v.userId === me._id) {\n        return true;\n      }\n    })\n      ? true\n      : false,\n  );\n\n  // helper method\n\n  const scrapDoneMessage = () => {\n    message.success({\n      content: \"스크랩 완료!\",\n      className: \"custom-class\",\n      style: {\n        marginTop: \"5vh\",\n      },\n    });\n  };\n\n  const unScrapDoneMessage = () => {\n    message.success({\n      content: \"스크랩 취소!\",\n      className: \"custom-class\",\n      style: {\n        marginTop: \"5vh\",\n      },\n    });\n  };\n\n  // event listener\n\n  const onToggleLike = useCallback(() => {\n    setLike(!like);\n    if (like) {\n      dispatch(\n        unLikePostRequestAction({\n          user: me,\n          id: post.likes.find((v, i) => {\n            if (v.userId === me._id) {\n              return true;\n            }\n          })._id,\n          type: \"forum\",\n          postId: post._id,\n        }),\n      );\n    } else {\n      dispatch(\n        likePostRequestAction({\n          user: me,\n          id: post._id,\n          type: \"forum\",\n        }),\n      );\n    }\n  }, [like, me, post]);\n\n  const onScrap = useCallback(() => {\n    setIsScraped(!isScraped);\n    if (isScraped) {\n      unScrapDoneMessage();\n      dispatch(\n        postUnScrapRequestAction({\n          postId: post._id,\n          type: contentType,\n          id: post.scraps.find((v, i) => {\n            if (v.userId === me._id) {\n              return true;\n            }\n          })._id,\n          user: me,\n        }),\n      );\n    } else {\n      scrapDoneMessage();\n      dispatch(\n        postScrapRequestAction({ id: post._id, type: contentType, user: me }),\n      );\n    }\n  }, [post, isScraped, me]);\n\n  const onPostDelete = useCallback(\n    (deleteType) => {\n      let confirmDelete =\n        deleteType === \"recruitDone\"\n          ? confirm(\"게시글이 삭제됩니다. 정말로 모집완료 처리하시겠습니까?\")\n          : confirm(\"정말로 삭제하시겠습니까?\");\n      if (confirmDelete) {\n        dispatch(deletePostRequestAction(post._id));\n        Router.push(`/articles/${contentType}`);\n      } else {\n        return;\n      }\n    },\n    [post],\n  );\n\n  const onPostRevise = useCallback(() => {\n    let confirmRevise = confirm(\"글을 수정하시겠습니까?\");\n    if (confirmRevise) {\n      Router.push(`/articles/edit/${post._id}`);\n    } else {\n    }\n  }, [post]);\n\n  return (\n    <>\n      <PostViewerHeaderWrapper>\n        <div className=\"user-profile\">\n          <Popover\n            content={\n              <div\n                onClick={(e) => {\n                  e.stopPropagation();\n                }}\n              >\n                {post.writer && (\n                  <ProfileModal\n                    writer={post.writer && post.writer}\n                  ></ProfileModal>\n                )}\n              </div>\n            }\n          >\n            <Avatar\n              onClick={(e) => {\n                e.stopPropagation();\n              }}\n              style={{ cursor: \"pointer\" }}\n              size={32}\n              icon={<UserOutlined />}\n              src={\n                post.writer &&\n                post.writer.avatarUrl && (\n                  <Image\n                    src={`${post.writer.avatarUrl}`}\n                    width={32}\n                    height={32}\n                  />\n                )\n              }\n            />{\" \"}\n          </Popover>\n          <span className=\"user-nickname\">\n            {post.writer ? post.writer.nickname : \"탈퇴한 회원\"}\n          </span>\n        </div>\n        <div className=\"post-desc\">\n          <div className=\"post-header-summary\">\n            <span className=\"create-date\">\n              {`${new Date(post.createdAt).getFullYear()}.${\n                new Date(post.createdAt).getMonth() + 1\n              }.${new Date(post.createdAt).getDate()}`}\n            </span>\n            <span className=\"create-time\">\n              {`${new Date(post.createdAt).getHours()}:${\n                new Date(post.createdAt).getMinutes() < 10\n                  ? \"0\" + new Date(post.createdAt).getMinutes()\n                  : new Date(post.createdAt).getMinutes()\n              }:${\n                new Date(post.createdAt).getSeconds() < 10\n                  ? \"0\" + new Date(post.createdAt).getSeconds()\n                  : new Date(post.createdAt).getSeconds()\n              }`}\n            </span>\n            <EyeOutlined />\n            <span className=\"post-views\">{post.views}</span>\n            <MessageOutlined />\n            <span className=\"post-comments\">{post.comments.length}</span>\n\n            <>\n              {contentType === \"forum\" && (\n                <>\n                  <LikeOutlined />\n                  <span className=\"post-forum-likes\">{post.likes.length}</span>\n                </>\n              )}\n              <TagsOutlined />\n              <span className=\"post-forum-scraps\">{post.scraps.length}</span>\n            </>\n          </div>\n          <div className=\"post-btns\">\n            {me && (\n              <>\n                <Button className=\"scrap-btn\" onClick={onScrap}>\n                  {isScraped ? (\n                    <TagsFilled\n                      style={{ marginRight: \"3px\", color: \"#1a91fe\" }}\n                    />\n                  ) : (\n                    <TagsOutlined style={{ marginRight: \"3px\" }} />\n                  )}\n                </Button>\n              </>\n            )}\n            {me && contentType == \"forum\" && (\n              <Button\n                type=\"ghost\"\n                className=\"like-btn\"\n                onClick={() => {\n                  onToggleLike();\n                }}\n              >\n                {like ? (\n                  <LikeFilled\n                    style={{ marginRight: \"3px\", color: \"#1a91fe\" }}\n                  />\n                ) : (\n                  <LikeOutlined style={{ marginRight: \"3px\" }} />\n                )}\n              </Button>\n            )}\n            {me &&\n              (contentType === \"study\" || contentType === \"project\") &&\n              post.writer &&\n              me._id === post.writer._id && (\n                <>\n                  <Button\n                    type=\"ghost\"\n                    className=\"revise-btn\"\n                    onClick={() => {\n                      onPostDelete(\"recruitDone\");\n                    }}\n                  >\n                    모집완료\n                  </Button>\n                  <span>/</span>\n                </>\n              )}\n\n            {me && post.writer && me._id === post.writer._id && (\n              <>\n                <Button\n                  type=\"ghost\"\n                  className=\"revise-btn\"\n                  onClick={() => {\n                    onPostRevise();\n                  }}\n                >\n                  수정\n                </Button>\n              </>\n            )}\n\n            {me &&\n              post.writer &&\n              me._id === post.writer._id &&\n              contentType === \"forum\" && (\n                <Button\n                  type=\"ghost\"\n                  style={{ color: \"tomato\" }}\n                  className=\"delete-btn\"\n                  onClick={() => {\n                    onPostDelete(\"deletePost\");\n                  }}\n                >\n                  삭제\n                </Button>\n              )}\n          </div>\n        </div>\n      </PostViewerHeaderWrapper>\n    </>\n  );\n};\n\nexport default PostViewerHeader;\n"]},"metadata":{},"sourceType":"module"}