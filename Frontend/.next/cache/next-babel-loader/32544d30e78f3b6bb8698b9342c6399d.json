{"ast":null,"code":"var _jsxFileName = \"/Users/jinho/Project/ProjectFrontend/pages/articles/forum/index.jsx\";\nimport React, { useEffect, useCallback, useState } from \"react\";\nimport ArticleLayout from \"../../../components/layout/ArticleLayout\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { initializePostsAction, loadForumPostsRequestAction } from \"../../../reducers/post\";\nimport List from \"../../../components/common/contents/List\";\nimport { Spin, Radio, Select } from \"antd\";\nimport styled from \"styled-components\";\nimport Router, { withRouter } from \"next/router\";\nimport Head from \"next/head\";\nimport wrapper from \"../../../store/configureStore\";\nimport { setUserRequestAction } from \"../../../reducers/user\";\nimport { END } from \"redux-saga\";\nimport client from \"../../../lib/api/client\";\n/**\n * @author 박진호\n * @version 1.0\n * @summary 포럼 포스트 리스트 뷰어 페이지\n */\n// style\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SpinWrapper = styled.div.withConfig({\n  displayName: \"forum__SpinWrapper\",\n  componentId: \"sc-11m321c-0\"\n})([\"text-align:center;margin:100px 0;\"]);\nconst ForumFilterWrapper = styled.div.withConfig({\n  displayName: \"forum__ForumFilterWrapper\",\n  componentId: \"sc-11m321c-1\"\n})([\"margin-bottom:10px;.ant-radio-button-wrapper-checked{color:#888;text-decoration:underline;&:hover{color:#888;}}.ant-radio-button-wrapper{transition:none;&::before{display:none;}&:hover{text-decoration:underline;}background:transparent;color:#888;border:none;font-size:12px;.ant-radio-button{}.ant-radio-button-checked{display:none;}}\"]); // helper variables\n\nlet skip = 0;\n\nconst Forum = ({\n  router\n}) => {\n  // redux\n  const dispatch = useDispatch();\n  const {\n    forumPosts,\n    loadPostsLoading\n  } = useSelector(state => state.post);\n  const {\n    temporalPostsLength\n  } = useSelector(state => state.post); // local state\n\n  const {\n    0: radioValue,\n    1: setRadioValue\n  } = useState(\"latest\");\n  const {\n    0: field,\n    1: setField\n  } = useState(\"전체\");\n  const {\n    term\n  } = router.query; // event listener\n\n  const onChangeField = useCallback(e => {\n    setField(e);\n\n    if (term) {\n      Router.push(`/articles/forum?term=${term}`);\n    } else {\n      Router.push(`/articles/forum`);\n    }\n  }, [router]);\n  const onClickRadio = useCallback(e => {\n    setRadioValue(e.target.value);\n  }, []);\n  const onClickSort = useCallback(e => {\n    if (term) {\n      Router.push(`/articles/forum?term=${term}`);\n    } else {\n      Router.push(`/articles/forum`);\n    }\n  }, [router]); // helper method\n\n  const handleScroll = () => {\n    const scrollHeight = document.documentElement.scrollHeight;\n    const scrollTop = document.documentElement.scrollTop;\n    const clientHeight = document.documentElement.clientHeight;\n\n    if (scrollTop + clientHeight >= scrollHeight && !loadPostsLoading) {\n      if (temporalPostsLength >= 10) {\n        dispatch(loadForumPostsRequestAction({\n          type: radioValue,\n          skip,\n          term: router.query.term,\n          field\n        }));\n      }\n\n      skip += 10;\n    }\n  }; // hooks\n\n\n  useEffect(() => {\n    dispatch(loadForumPostsRequestAction({\n      type: radioValue,\n      term: router.query.term,\n      skip,\n      field\n    }));\n    skip += 10;\n    return () => {\n      skip = 0;\n      dispatch(initializePostsAction());\n    };\n  }, [router]);\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [temporalPostsLength]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"meta\", {\n        charSet: \"utf-8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"\\uD3EC\\uB7FC\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ArticleLayout, {\n      contentType: \"forum\",\n      children: [/*#__PURE__*/_jsxDEV(ForumFilterWrapper, {\n        children: [/*#__PURE__*/_jsxDEV(Select, {\n          defaultValue: \"\\uC804\\uCCB4\",\n          onChange: onChangeField,\n          children: [/*#__PURE__*/_jsxDEV(Select.Option, {\n            value: \"\\uC804\\uCCB4\",\n            children: \"\\uC804\\uCCB4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select.Option, {\n            value: \"\\uC790\\uC720\",\n            children: \"\\uC790\\uC720\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select.Option, {\n            value: \"QnA\",\n            children: \"QnA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Radio.Group, {\n          onChange: onClickRadio,\n          defaultValue: \"latest\",\n          children: [/*#__PURE__*/_jsxDEV(Radio.Button, {\n            value: \"latest\",\n            onClick: onClickSort,\n            children: \"\\uCD5C\\uC2E0\\uC21C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Radio.Button, {\n            value: \"likes\",\n            onClick: onClickSort,\n            children: \"\\uCD94\\uCC9C\\uC21C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Radio.Button, {\n            value: \"comments\",\n            onClick: onClickSort,\n            children: \"\\uB313\\uAE00\\uC21C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Radio.Button, {\n            value: \"scraps\",\n            onClick: onClickSort,\n            children: \"\\uC2A4\\uD06C\\uB7A9\\uC21C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Radio.Button, {\n            value: \"views\",\n            onClick: onClickSort,\n            children: \"\\uC870\\uD68C\\uC21C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(List, {\n        data: forumPosts,\n        type: \"forum\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), loadPostsLoading && /*#__PURE__*/_jsxDEV(SpinWrapper, {\n        children: /*#__PURE__*/_jsxDEV(Spin, {\n          tip: \"\\uBD88\\uB7EC\\uC624\\uB294\\uC911...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\nexport const getServerSideProps = wrapper.getServerSideProps(async context => {\n  const cookie = context.req ? context.req.headers.cookie : \"\";\n  client.defaults.headers.Cookie = \"\";\n\n  if (context.req && cookie) {\n    client.defaults.withCredentials = true;\n    client.defaults.headers.Cookie = cookie;\n  }\n\n  context.store.dispatch(setUserRequestAction()); // context.store.dispatch(\n  //   loadForumPostsRequestAction({\n  //     type: \"latest\",\n  //     term: \"\",\n  //     skip: 0,\n  //     field: \"QnA\",\n  //   }),\n  // );\n\n  context.store.dispatch(END);\n  await context.store.sagaTask.toPromise();\n});\nexport default withRouter(Forum);","map":{"version":3,"sources":["/Users/jinho/Project/ProjectFrontend/pages/articles/forum/index.jsx"],"names":["React","useEffect","useCallback","useState","ArticleLayout","useDispatch","useSelector","initializePostsAction","loadForumPostsRequestAction","List","Spin","Radio","Select","styled","Router","withRouter","Head","wrapper","setUserRequestAction","END","client","SpinWrapper","div","ForumFilterWrapper","skip","Forum","router","dispatch","forumPosts","loadPostsLoading","state","post","temporalPostsLength","radioValue","setRadioValue","field","setField","term","query","onChangeField","e","push","onClickRadio","target","value","onClickSort","handleScroll","scrollHeight","document","documentElement","scrollTop","clientHeight","type","window","addEventListener","removeEventListener","getServerSideProps","context","cookie","req","headers","defaults","Cookie","withCredentials","store","sagaTask","toPromise"],"mappings":"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","sourcesContent":["import React, { useEffect, useCallback, useState } from \"react\";\nimport ArticleLayout from \"../../../components/layout/ArticleLayout\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  initializePostsAction,\n  loadForumPostsRequestAction,\n} from \"../../../reducers/post\";\nimport List from \"../../../components/common/contents/List\";\nimport { Spin, Radio, Select } from \"antd\";\nimport styled from \"styled-components\";\nimport Router, { withRouter } from \"next/router\";\nimport Head from \"next/head\";\nimport wrapper from \"../../../store/configureStore\";\nimport { setUserRequestAction } from \"../../../reducers/user\";\nimport { END } from \"redux-saga\";\nimport client from \"../../../lib/api/client\";\n\n/**\n * @author 박진호\n * @version 1.0\n * @summary 포럼 포스트 리스트 뷰어 페이지\n */\n\n// style\n\nconst SpinWrapper = styled.div`\n  text-align: center;\n  margin: 100px 0;\n`;\n\nconst ForumFilterWrapper = styled.div`\n  margin-bottom: 10px;\n  .ant-radio-button-wrapper-checked {\n    color: #888;\n    text-decoration: underline;\n    &:hover {\n      color: #888;\n    }\n  }\n  .ant-radio-button-wrapper {\n    transition: none;\n    &::before {\n      display: none;\n    }\n    &:hover {\n      text-decoration: underline;\n    }\n    background: transparent;\n    color: #888;\n    border: none;\n    font-size: 12px;\n    .ant-radio-button {\n    }\n    .ant-radio-button-checked {\n      display: none;\n    }\n  }\n`;\n\n// helper variables\n\nlet skip = 0;\n\nconst Forum = ({ router }) => {\n  // redux\n\n  const dispatch = useDispatch();\n  const { forumPosts, loadPostsLoading } = useSelector((state) => state.post);\n  const { temporalPostsLength } = useSelector((state) => state.post);\n\n  // local state\n\n  const [radioValue, setRadioValue] = useState(\"latest\");\n  const [field, setField] = useState(\"전체\");\n  const { term } = router.query;\n\n  // event listener\n\n  const onChangeField = useCallback(\n    (e) => {\n      setField(e);\n      if (term) {\n        Router.push(`/articles/forum?term=${term}`);\n      } else {\n        Router.push(`/articles/forum`);\n      }\n    },\n    [router],\n  );\n\n  const onClickRadio = useCallback((e) => {\n    setRadioValue(e.target.value);\n  }, []);\n\n  const onClickSort = useCallback(\n    (e) => {\n      if (term) {\n        Router.push(`/articles/forum?term=${term}`);\n      } else {\n        Router.push(`/articles/forum`);\n      }\n    },\n    [router],\n  );\n\n  // helper method\n\n  const handleScroll = () => {\n    const scrollHeight = document.documentElement.scrollHeight;\n    const scrollTop = document.documentElement.scrollTop;\n    const clientHeight = document.documentElement.clientHeight;\n    if (scrollTop + clientHeight >= scrollHeight && !loadPostsLoading) {\n      if (temporalPostsLength >= 10) {\n        dispatch(\n          loadForumPostsRequestAction({\n            type: radioValue,\n            skip,\n            term: router.query.term,\n            field,\n          }),\n        );\n      }\n      skip += 10;\n    }\n  };\n\n  // hooks\n\n  useEffect(() => {\n    dispatch(\n      loadForumPostsRequestAction({\n        type: radioValue,\n        term: router.query.term,\n        skip,\n        field,\n      }),\n    );\n    skip += 10;\n\n    return () => {\n      skip = 0;\n      dispatch(initializePostsAction());\n    };\n  }, [router]);\n\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [temporalPostsLength]);\n\n  return (\n    <>\n      <Head>\n        <meta charSet=\"utf-8\"></meta>\n        <title>포럼</title>\n      </Head>\n      <ArticleLayout contentType=\"forum\">\n        <ForumFilterWrapper>\n          <Select defaultValue=\"전체\" onChange={onChangeField}>\n            <Select.Option value=\"전체\">전체</Select.Option>\n            <Select.Option value=\"자유\">자유</Select.Option>\n            <Select.Option value=\"QnA\">QnA</Select.Option>\n          </Select>\n          <Radio.Group onChange={onClickRadio} defaultValue=\"latest\">\n            <Radio.Button value=\"latest\" onClick={onClickSort}>\n              최신순\n            </Radio.Button>\n            <Radio.Button value=\"likes\" onClick={onClickSort}>\n              추천순\n            </Radio.Button>\n            <Radio.Button value=\"comments\" onClick={onClickSort}>\n              댓글순\n            </Radio.Button>\n            <Radio.Button value=\"scraps\" onClick={onClickSort}>\n              스크랩순\n            </Radio.Button>\n            <Radio.Button value=\"views\" onClick={onClickSort}>\n              조회순\n            </Radio.Button>\n          </Radio.Group>\n        </ForumFilterWrapper>\n        <List data={forumPosts} type=\"forum\" />\n        {loadPostsLoading && (\n          <SpinWrapper>\n            <Spin tip=\"불러오는중...\" />\n          </SpinWrapper>\n        )}\n      </ArticleLayout>\n    </>\n  );\n};\n\nexport const getServerSideProps = wrapper.getServerSideProps(\n  async (context) => {\n    const cookie = context.req ? context.req.headers.cookie : \"\";\n    client.defaults.headers.Cookie = \"\";\n    if (context.req && cookie) {\n      client.defaults.withCredentials = true;\n      client.defaults.headers.Cookie = cookie;\n    }\n    context.store.dispatch(setUserRequestAction());\n    // context.store.dispatch(\n    //   loadForumPostsRequestAction({\n    //     type: \"latest\",\n    //     term: \"\",\n    //     skip: 0,\n    //     field: \"QnA\",\n    //   }),\n    // );\n    context.store.dispatch(END);\n    await context.store.sagaTask.toPromise();\n  },\n);\n\nexport default withRouter(Forum);\n"]},"metadata":{},"sourceType":"module"}