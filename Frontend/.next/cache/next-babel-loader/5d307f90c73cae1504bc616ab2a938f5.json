{"ast":null,"code":"import React, { useCallback, useState } from \"react\";\nimport { Form, Input, Button } from \"antd\";\nimport Head from \"next/head\";\nimport AuthLayout from \"../../components/layout/AuthLayout\";\nimport Header from \"../../components/common/Header\";\nimport axios from \"axios\";\nimport Router, { withRouter } from \"next/router\";\n/**\n * @author 박진호\n * @version 1.0\n * @summary 비밀번호 변경 페이지\n */\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar passwordUpdate = function passwordUpdate() {\n  // local state\n  var _useState = useState(\"\"),\n      currentPassword = _useState[0],\n      setCurrentPassword = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      newPassword = _useState2[0],\n      setNewPassword = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      newPasswordConfirm = _useState3[0],\n      setNewPasswordConfirm = _useState3[1];\n\n  var _useState4 = useState(false),\n      newPasswordMatchError = _useState4[0],\n      setNewPasswordMatchError = _useState4[1];\n\n  var _useState5 = useState(false),\n      currentPasswordError = _useState5[0],\n      setCurrentPasswordError = _useState5[1]; // event listener\n\n\n  var onChangeCurrentPassword = useCallback(function (e) {\n    setCurrentPassword(e.target.value);\n  }, []);\n  var onChangeNewPassword = useCallback(function (e) {\n    setNewPassword(e.target.value);\n  }, []);\n  var onChangeNewPasswordConfirm = useCallback(function (e) {\n    setNewPasswordConfirm(e.target.value);\n  }, []);\n  var onSubmit = useCallback(function () {\n    if (currentPassword === \"\" || newPassword === \"\" || newPasswordConfirm === \"\") {\n      alert(\"빈칸을 채워주세요.\");\n      return;\n    }\n\n    axios.patch(\"/api/users/changePassword\", {\n      password: currentPassword,\n      newPassword: newPassword\n    }).then(function (res) {\n      if (res.data.message) {\n        setCurrentPasswordError(true);\n        alert(\"현재 비밀번호가 일치하지 않습니다.\");\n        return;\n      } else if (res.data.success) {\n        alert(\"비밀번호 변경 성공!\");\n        Router.push(\"/\");\n      } else {\n        alert(\"비밀번호 변경 성공!\");\n        Router.push(\"/\");\n      }\n    })[\"catch\"](function (err) {\n      console.log(err);\n    });\n  }, [currentPassword, newPassword, newPasswordConfirm]);\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"meta\", {\n        charSet: \"utf-8\"\n      }), /*#__PURE__*/_jsx(\"title\", {\n        children: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uBCC0\\uACBD\"\n      })]\n    }), /*#__PURE__*/_jsx(Header, {}), /*#__PURE__*/_jsx(AuthLayout, {\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        style: {\n          background: \"#fff\",\n          borderRadius: \"5px\",\n          padding: \"40px\",\n          margin: \"140px 0\"\n        },\n        children: [/*#__PURE__*/_jsx(\"h2\", {\n          children: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uBCC0\\uACBD\"\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          style: {\n            marginBottom: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsx(\"span\", {\n            style: {\n              color: \"red\"\n            },\n            children: \"*\"\n          }), \" \\uC548\\uC804\\uD55C \\uBE44\\uBC00\\uBC88\\uD638\\uB85C \\uACC4\\uC815\\uC744 \\uBCF4\\uD638\\uD558\\uC138\\uC694.\"]\n        }), /*#__PURE__*/_jsxs(Form, {\n          children: [/*#__PURE__*/_jsx(Form.Item, {\n            name: \"current-password\",\n            rules: [{\n              required: true,\n              message: \"현재 비밀번호를 입력해주세요.\"\n            }],\n            hasFeedback: true,\n            children: /*#__PURE__*/_jsx(Input.Password, {\n              placeholder: \"\\uD604\\uC7AC \\uBE44\\uBC00\\uBC88\\uD638\",\n              onChange: onChangeCurrentPassword\n            })\n          }), /*#__PURE__*/_jsx(Form.Item, {\n            name: \"new-password\",\n            rules: [{\n              required: true,\n              message: \"새 비밀번호를 입력해주세요.\"\n            }, {\n              min: 8,\n              message: \"8자리 이상 비밀번호를 입력해주세요.\"\n            }],\n            hasFeedback: true,\n            children: /*#__PURE__*/_jsx(Input.Password, {\n              placeholder: \"\\uC0C8 \\uBE44\\uBC00\\uBC88\\uD638\",\n              onChange: onChangeNewPassword\n            })\n          }), /*#__PURE__*/_jsx(Form.Item, {\n            name: \"new-password-confirm\",\n            dependencies: [\"new-password\"],\n            rules: [{\n              required: true,\n              message: \"새 비밀번호 확인을 입력해주세요.\"\n            }, {\n              min: 8,\n              message: \"8자리 이상 비밀번호를 입력해주세요.\"\n            }, function (_ref) {\n              var getFieldValue = _ref.getFieldValue;\n              return {\n                validator: function validator(_, value) {\n                  if (!value || getFieldValue(\"new-password\") === value) {\n                    return Promise.resolve();\n                  }\n\n                  return Promise.reject(\"새 비밀번호가 일치하지 않습니다.\");\n                }\n              };\n            }],\n            hasFeedback: true,\n            children: /*#__PURE__*/_jsx(Input.Password, {\n              placeholder: \"\\uC0C8 \\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\",\n              onChange: onChangeNewPasswordConfirm\n            })\n          }), /*#__PURE__*/_jsx(Form.Item, {\n            children: /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                textAlign: \"center\"\n              },\n              children: /*#__PURE__*/_jsx(Button, {\n                onClick: onSubmit,\n                children: \"\\uD655\\uC778\"\n              })\n            })\n          })]\n        })]\n      })\n    })]\n  });\n};\n\nexport var __N_SSP = true;\nexport default withRouter(passwordUpdate);","map":null,"metadata":{},"sourceType":"module"}