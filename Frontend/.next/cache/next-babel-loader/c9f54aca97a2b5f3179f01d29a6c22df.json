{"ast":null,"code":"var _jsxFileName = \"/Users/jinho/Project/ProjectFrontend/components/mypage/EditProfileForm.jsx\";\nimport React, { useCallback } from \"react\";\nimport { Card, Form, Input, Button, Upload, Checkbox } from \"antd\";\nimport { useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport shortid from \"shortid\";\nimport { SERVER_URL } from \"../../lib/constant/constant\";\nimport { UploadOutlined } from \"@ant-design/icons\";\nimport Link from \"next/link\";\nimport axios from \"axios\";\nimport Router from \"next/router\";\nimport firebase from \"../../firebase\";\n/**\n * @author 박진호\n * @version 1.0\n * @summary 프로필 수정 폼 컴포넌트\n */\n// style\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditProfileFormWrapper = styled(Form).withConfig({\n  displayName: \"EditProfileForm__EditProfileFormWrapper\",\n  componentId: \"sc-149yjtm-0\"\n})([\".image-edit-btn{&:hover{color:#111;border:1px solid #313355;}}.password-edit-btn{&:hover{color:#111;border:1px solid #313355;}}@media (max-width:900px){width:100%;.profile-card{margin:0 auto;}}\"]);\nconst RegisterInputItemWrapper = styled(Form.Item).withConfig({\n  displayName: \"EditProfileForm__RegisterInputItemWrapper\",\n  componentId: \"sc-149yjtm-1\"\n})([\".ant-form-item-label{text-align:left;}.email-code{width:200px;}.ant-form-item-control{}@media (max-width:768px){flex-direction:column;}\"]);\nconst ProfileItemWrapper = styled.div.withConfig({\n  displayName: \"EditProfileForm__ProfileItemWrapper\",\n  componentId: \"sc-149yjtm-2\"\n})([\"margin:20px 0;\"]);\n\nconst EditProfileForm = ({\n  onChangeProfileImage,\n  onDeleteProfileImage,\n  onChangeNickname,\n  onChangeGithubId,\n  onToggleGitSecret,\n  gitSecret\n}) => {\n  // redux\n  const {\n    me\n  } = useSelector(state => state.user); // event listener\n\n  const onDeleteAccount = useCallback(() => {\n    let deleteConfirm = confirm(\"정말 회원 탈퇴를 진행하시겠습니까?\");\n\n    if (deleteConfirm) {\n      axios.delete(`/api/users/${me._id}`).then(async res => {\n        alert(\"회원 탈퇴 처리가 정상적으로 처리되었습니다. CodePlat을 이용해주셔서 감사합니다.\");\n        let user = firebase.auth().currentUser;\n\n        if (user) {\n          await user.delete().then(async () => {\n            await firebase.database().ref(\"users\").child(user.uid).remove();\n            console.log(\"firebase 탈퇴 성공\");\n          }).catch(err => {\n            console.log(err);\n          });\n        }\n\n        Router.push(`/`);\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {}\n  }, [me]);\n  if (!me) return null;\n  return /*#__PURE__*/_jsxDEV(EditProfileFormWrapper, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"site-card-border-less-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        title: \"\\uD504\\uB85C\\uD544 \\uC218\\uC815\",\n        bordered: true,\n        style: {\n          width: 300\n        },\n        className: \"profile-card\",\n        children: [/*#__PURE__*/_jsxDEV(ProfileItemWrapper, {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\uB2C9\\uB124\\uC784\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            disabled: true,\n            placeholder: \"\\uB2C9\\uB124\\uC784\",\n            onChange: onChangeNickname,\n            defaultValue: me && me.nickname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProfileItemWrapper, {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\uAE43\\uD5C8\\uBE0C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"\\uAE43\\uD5C8\\uBE0C\",\n            onChange: onChangeGithubId,\n            defaultValue: me && me.githubUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Checkbox, {\n            onChange: onToggleGitSecret,\n            defaultChecked: me && me.secretGithub,\n            children: \"\\uBE44\\uACF5\\uAC1C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProfileItemWrapper, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"\\uD504\\uB85C\\uD544 \\uC0AC\\uC9C4 \\uBCC0\\uACBD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Upload, {\n            name: \"logo\",\n            listType: \"picture\",\n            accept: \"image/*\",\n            beforeUpload: onChangeProfileImage,\n            maxCount: 1,\n            defaultFileList: me.avatarUrl && [{\n              uid: shortid.generate(),\n              url: `${SERVER_URL}/${me.avatarUrl}`,\n              thumbUrl: `${SERVER_URL}/${me.avatarUrl}`,\n              name: me.avatarUrl,\n              status: \"done\"\n            }],\n            onRemove: onDeleteProfileImage,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              className: \"image-edit-btn\",\n              icon: /*#__PURE__*/_jsxDEV(UploadOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 56\n              }, this),\n              children: \"\\uC774\\uBBF8\\uC9C0 \\uBCC0\\uACBD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          href: \"/auth/passwordUpdate\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              className: \"password-edit-btn\",\n              block: true,\n              children: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uBCC0\\uACBD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"danger\",\n          block: true,\n          style: {\n            marginTop: \"10px\"\n          },\n          onClick: onDeleteAccount,\n          children: \"\\uD68C\\uC6D0 \\uD0C8\\uD1F4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n};\n\nexport default EditProfileForm;","map":{"version":3,"sources":["/Users/jinho/Project/ProjectFrontend/components/mypage/EditProfileForm.jsx"],"names":["React","useCallback","Card","Form","Input","Button","Upload","Checkbox","useSelector","styled","shortid","SERVER_URL","UploadOutlined","Link","axios","Router","firebase","EditProfileFormWrapper","RegisterInputItemWrapper","Item","ProfileItemWrapper","div","EditProfileForm","onChangeProfileImage","onDeleteProfileImage","onChangeNickname","onChangeGithubId","onToggleGitSecret","gitSecret","me","state","user","onDeleteAccount","deleteConfirm","confirm","delete","_id","then","res","alert","auth","currentUser","database","ref","child","uid","remove","console","log","catch","err","push","width","nickname","githubUrl","secretGithub","avatarUrl","generate","url","thumbUrl","name","status","marginTop"],"mappings":"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","sourcesContent":["import React, { useCallback } from \"react\";\nimport { Card, Form, Input, Button, Upload, Checkbox } from \"antd\";\nimport { useSelector } from \"react-redux\";\nimport styled from \"styled-components\";\nimport shortid from \"shortid\";\nimport { SERVER_URL } from \"../../lib/constant/constant\";\nimport { UploadOutlined } from \"@ant-design/icons\";\nimport Link from \"next/link\";\nimport axios from \"axios\";\nimport Router from \"next/router\";\nimport firebase from \"../../firebase\";\n\n/**\n * @author 박진호\n * @version 1.0\n * @summary 프로필 수정 폼 컴포넌트\n */\n\n// style\n\nconst EditProfileFormWrapper = styled(Form)`\n  .image-edit-btn {\n    &:hover {\n      color: #111;\n      border: 1px solid #313355;\n    }\n  }\n  .password-edit-btn {\n    &:hover {\n      color: #111;\n      border: 1px solid #313355;\n    }\n  }\n  @media (max-width: 900px) {\n    width: 100%;\n    .profile-card {\n      margin: 0 auto;\n    }\n  }\n`;\n\nconst RegisterInputItemWrapper = styled(Form.Item)`\n  .ant-form-item-label {\n    text-align: left;\n  }\n  .email-code {\n    width: 200px;\n  }\n  .ant-form-item-control {\n  }\n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n\nconst ProfileItemWrapper = styled.div`\n  margin: 20px 0;\n`;\n\nconst EditProfileForm = ({\n  onChangeProfileImage,\n  onDeleteProfileImage,\n  onChangeNickname,\n  onChangeGithubId,\n  onToggleGitSecret,\n  gitSecret,\n}) => {\n  // redux\n\n  const { me } = useSelector((state) => state.user);\n\n  // event listener\n\n  const onDeleteAccount = useCallback(() => {\n    let deleteConfirm = confirm(\"정말 회원 탈퇴를 진행하시겠습니까?\");\n    if (deleteConfirm) {\n      axios\n        .delete(`/api/users/${me._id}`)\n        .then(async (res) => {\n          alert(\n            \"회원 탈퇴 처리가 정상적으로 처리되었습니다. CodePlat을 이용해주셔서 감사합니다.\",\n          );\n          let user = firebase.auth().currentUser;\n          if (user) {\n            await user\n              .delete()\n              .then(async () => {\n                await firebase.database().ref(\"users\").child(user.uid).remove();\n                console.log(\"firebase 탈퇴 성공\");\n              })\n              .catch((err) => {\n                console.log(err);\n              });\n          }\n          Router.push(`/`);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    } else {\n    }\n  }, [me]);\n\n  if (!me) return null;\n  return (\n    <EditProfileFormWrapper>\n      <div className=\"site-card-border-less-wrapper\">\n        <Card\n          title=\"프로필 수정\"\n          bordered={true}\n          style={{ width: 300 }}\n          className=\"profile-card\"\n        >\n          <ProfileItemWrapper>\n            <span>닉네임</span>\n            <Input\n              disabled\n              placeholder=\"닉네임\"\n              onChange={onChangeNickname}\n              defaultValue={me && me.nickname}\n            />\n          </ProfileItemWrapper>\n\n          <ProfileItemWrapper>\n            <span>깃허브</span>\n            <Input\n              placeholder=\"깃허브\"\n              onChange={onChangeGithubId}\n              defaultValue={me && me.githubUrl}\n            />\n            <Checkbox\n              onChange={onToggleGitSecret}\n              defaultChecked={me && me.secretGithub}\n            >\n              비공개\n            </Checkbox>\n          </ProfileItemWrapper>\n\n          <ProfileItemWrapper>\n            <div>프로필 사진 변경</div>\n            <Upload\n              name=\"logo\"\n              listType=\"picture\"\n              accept=\"image/*\"\n              beforeUpload={onChangeProfileImage}\n              maxCount={1}\n              defaultFileList={\n                me.avatarUrl && [\n                  {\n                    uid: shortid.generate(),\n                    url: `${SERVER_URL}/${me.avatarUrl}`,\n                    thumbUrl: `${SERVER_URL}/${me.avatarUrl}`,\n                    name: me.avatarUrl,\n                    status: \"done\",\n                  },\n                ]\n              }\n              onRemove={onDeleteProfileImage}\n            >\n              <Button className=\"image-edit-btn\" icon={<UploadOutlined />}>\n                이미지 변경\n              </Button>\n            </Upload>\n          </ProfileItemWrapper>\n          <Link href=\"/auth/passwordUpdate\">\n            <a>\n              <Button className=\"password-edit-btn\" block>\n                비밀번호 변경\n              </Button>\n            </a>\n          </Link>\n          <Button\n            type=\"danger\"\n            block\n            style={{ marginTop: \"10px\" }}\n            onClick={onDeleteAccount}\n          >\n            회원 탈퇴\n          </Button>\n        </Card>\n      </div>\n    </EditProfileFormWrapper>\n  );\n};\n\nexport default EditProfileForm;\n"]},"metadata":{},"sourceType":"module"}